<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 3.7.1" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>tutorialGO - Fallenk&#39;s Blog</title>


    <meta name="description" content="基础包，变量和函数包每个 Go 程序都是由包构成的。程序从main包开始运行。">
<meta name="keywords" content="编程">
<meta property="og:type" content="article">
<meta property="og:title" content="tutorialGO">
<meta property="og:url" content="https://fallenk.github.io/2018/09/28/tutorialGO/index.html">
<meta property="og:site_name" content="Fallenk&#39;s Blog">
<meta property="og:description" content="基础包，变量和函数包每个 Go 程序都是由包构成的。程序从main包开始运行。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://fallenk.github.io/images/og_image.png">
<meta property="og:updated_time" content="2019-05-16T12:43:33.186Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="tutorialGO">
<meta name="twitter:description" content="基础包，变量和函数包每个 Go 程序都是由包构成的。程序从main包开始运行。">
<meta name="twitter:image" content="https://fallenk.github.io/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="tutorialGO" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Pencarian" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-09-28T11:40:21.000Z">2018-09-28</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/golang学习/">golang学习</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    an hour membaca (Sekitar 10650 kata)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                tutorialGO
            
        </h1>
        <div class="content">
            <h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="包，变量和函数"><a href="#包，变量和函数" class="headerlink" title="包，变量和函数"></a>包，变量和函数</h2><h3 id="包"><a href="#包" class="headerlink" title="包"></a>包</h3><p>每个 Go 程序都是由<strong>包</strong>构成的。<br>程序从<code>main</code>包开始运行。</p>
<a id="more"></a>
<p>本程序通过导入路径<code>&quot;fmt&quot;</code>和<code>&quot;math/rand&quot;</code>来使用这两个包。</p>
<p>按照约定，包名与导入路径的最后一个元素一致。例如<code>&quot;math/rand&quot;</code>包中的源码均以<code>package rand</code>语句开始。</p>
<p><em>注意：</em> 此程序的运行环境是固定的，因此 <code>rand.Intn</code>总是会返回相同的数字。 （要得到不同的数字，需为生成器提供不同的种子数，参见 <code>rand.Seed</code>。）</p>
<h3 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h3><p>此代码用圆括号组合了导入，这是“分组”形式的导入语句。[推荐]</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;math&quot;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>当然你也可以编写多个导入语句，例如：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &quot;fmt&quot;</span><br><span class="line">import &quot;math&quot;</span><br></pre></td></tr></table></figure>
<h3 id="导出名"><a href="#导出名" class="headerlink" title="导出名"></a>导出名</h3><p>在<code>Go</code>中，如果一个名字以大写字母开头，那么它就是已导出的。例如，<code>Pizza</code>就是个已导出名，<code>Pi</code>也同样，它导出自<code>math</code>包。</p>
<p><code>pizza</code>和<code>pi</code>并未以大写字母开头，所以它们是未导出的。</p>
<p>在导入一个包时，你只能引用其中已导出的名字。任何“未导出”的名字在该包外均无法访问。</p>
<p>执行代码，观察错误输出。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// fmt.Println(math.pi); // math.pi undefined </span></span><br><span class="line">    fmt.Printlin(math.Pi)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>函数可以没有参数或接受多个参数。<br><code>add</code>接受两个<code>int</code>类型的参数。</p>
<p>注意<strong>类型在变量名</strong>之后。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">add</span><span class="hljs-params">(x <span class="hljs-keyword">int</span>, y <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当连续两个或多个函数的已命名形参类型相同时，除最后一个类型以外，其它都可以省略。<br><code>x int, y int</code>可以写作</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">add</span><span class="hljs-params">(x, y <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> x+y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="与C语言对比"><a href="#与C语言对比" class="headerlink" title="与C语言对比"></a>与C语言对比</h4><p><a href="https://blog.go-zh.org/gos-declaration-syntax" target="_blank" rel="noopener">参考</a></p>
<ol>
<li>C系列语言定义<code>int x</code>， 是定义一个表达式， 包含变量， 声明表达式的类型，从右向左读取。</li>
<li>C系列之外的语言则是:</li>
</ol>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x: int</span><br><span class="line">p: pointer to int</span><br><span class="line">a: array[3] of int</span><br></pre></td></tr></table></figure>
<p>从左向右读取，写出一个变量， 声明的类型(Note：指针类型除外)</p>
<ol start="3">
<li>GO中的指针<br> 在GO语法中，将括号放到类型的左边，但表达式则是将括号放在右边</li>
</ol>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> a []<span class="hljs-keyword">int</span></span><br><span class="line">x = a[<span class="hljs-number">1</span>]</span><br><span class="line"><span class="hljs-keyword">var</span> p *<span class="hljs-keyword">int</span></span><br><span class="line">value := *p</span><br><span class="line">pointer := &amp;value</span><br></pre></td></tr></table></figure>
<h3 id="多值返回"><a href="#多值返回" class="headerlink" title="多值返回"></a>多值返回</h3><p>函数可以返回任意数量的返回值。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">swap</span><span class="hljs-params">(a, b <span class="hljs-keyword">string</span>)</span> <span class="hljs-params">(<span class="hljs-keyword">string</span>, <span class="hljs-keyword">string</span>)</span></span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> b, a</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;</span><br><span class="line">    a, b := swap(<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>) <span class="hljs-comment">// '' 与 ""不同</span></span><br><span class="line">    fmt.Println(<span class="hljs-string">"a, b:"</span>, a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="命名返回值"><a href="#命名返回值" class="headerlink" title="命名返回值"></a>命名返回值</h3><ol>
<li>Go 的返回值可被命名，它们会被视作定义在函数顶部的变量。</li>
<li>返回值的名称应当具有一定的意义，它可以作为文档使用。</li>
<li>没有参数的 return 语句返回已命名的返回值。也就是 直接 返回。</li>
<li>直接返回语句应当仅用在下面这样的短函数中。在长的函数中它们会影响代码的可读性。</li>
</ol>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">split</span><span class="hljs-params">(sum <span class="hljs-keyword">int</span>)</span> <span class="hljs-params">(x, y <span class="hljs-keyword">int</span>)</span></span> &#123;</span><br><span class="line">	x = sum * <span class="hljs-number">4</span> /<span class="hljs-number">9</span></span><br><span class="line">	y = sum - x</span><br><span class="line">	<span class="hljs-keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(split(<span class="hljs-number">17</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p><code>var</code>语句用于<strong>声明一个变量列表</strong>，跟函数的参数列表一样，类型在最后。</p>
<p>就像在这个例子中看到的一样，var 语句可以出现在包或函数级别。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">var</span> c, python, java <span class="hljs-keyword">bool</span>;</span><br><span class="line"><span class="hljs-keyword">var</span> i <span class="hljs-keyword">int</span>;</span><br><span class="line"><span class="hljs-comment">// var x float32, y int16;   syntax error</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(i, c, python, java);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="变量的初始化"><a href="#变量的初始化" class="headerlink" title="变量的初始化"></a>变量的初始化</h3><p>变量声明可以包含初始值，每个变量对应一个。</p>
<p>如果初始化值已存在，则可以省略类型；变量会从初始值中获得类型。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span></span><br><span class="line"><span class="hljs-keyword">var</span> i, j <span class="hljs-keyword">int</span> = <span class="hljs-number">1</span>, <span class="hljs-number">2</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> c, python, java = <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-string">"no!"</span></span><br><span class="line">	fmt.Println(i, j, c, python, java)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="短变量声明"><a href="#短变量声明" class="headerlink" title="短变量声明"></a>短变量声明</h3><p>在函数中，简洁<strong>赋值语句</strong><code>:=</code>可在类型明确的地方代替<code>var</code>声明。</p>
<p>函数外的每个语句都必须以关键字开始<code>（var, func 等等）</code>，因此 <code>:=</code>结构<strong>不能</strong>在函数外使用。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> i, j <span class="hljs-keyword">int</span> = <span class="hljs-number">1</span>, <span class="hljs-number">2</span></span><br><span class="line">	k := <span class="hljs-number">3</span></span><br><span class="line">	c, python, java := <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-string">"no!"</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(i, j, k, c, python, java)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>总结： <strong>声明变量</strong>必须只用两种</p>
<ul>
<li>使用<code>var</code>申明列表, 如<code>var x, y = 1, &quot;dd&quot;;</code>;</li>
<li>而<code>:=</code>可以代替<code>var</code> 做简洁申明并且必须进行初始化， <code>python, java := &quot;ss&quot;, 2;</code></li>
</ul>
<h3 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h3><p>GO的基本类型</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">bool</span></span><br><span class="line"><span class="hljs-keyword">string</span></span><br><span class="line"><span class="hljs-keyword">int</span>  <span class="hljs-keyword">int8</span>  <span class="hljs-keyword">int16</span>  <span class="hljs-keyword">int32</span>  <span class="hljs-keyword">int64</span></span><br><span class="line"><span class="hljs-keyword">uint</span> <span class="hljs-keyword">uint8</span> <span class="hljs-keyword">uint16</span> <span class="hljs-keyword">uint32</span> <span class="hljs-keyword">uint64</span> <span class="hljs-keyword">uintptr</span></span><br><span class="line"><span class="hljs-keyword">byte</span> <span class="hljs-comment">// uint8 的别名</span></span><br><span class="line"><span class="hljs-keyword">rune</span> <span class="hljs-comment">// int32 的别名 表示一个 Unicode 码点</span></span><br><span class="line"><span class="hljs-keyword">float32</span> <span class="hljs-keyword">float64</span></span><br><span class="line"><span class="hljs-keyword">complex64</span> <span class="hljs-keyword">complex128</span></span><br></pre></td></tr></table></figure>
<ol>
<li>本例展示了几种类型的变量。 <strong>同导入语句一样，变量声明也可以“分组”成一个语法块</strong>。</li>
<li><code>int, uint</code> 和 <code>uintptr</code> 在 32 位系统上通常为 32 位宽，在 64 位系统上则为 64 位宽。 </li>
</ol>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;math/cmplx&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">var (</span><br><span class="line">	ToBe bool = false</span><br><span class="line">	MaxInt uint64 = 1&lt;&lt;64-1</span><br><span class="line">	z complex128 = cmplx.Sqrt(-5+12i)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">var i, j float32 = 1, 2</span><br><span class="line">var a, b, x, y = 1, 2, true, false // var 申明一个变量列表(类型可省略)</span><br><span class="line">func main() &#123;</span><br><span class="line">	k, w := 1, 2;</span><br><span class="line">	fmt.Println(k, w);</span><br><span class="line">	// fmt.Println 打印字符串并换行,fmt.Printf获取变量输出(推荐使用)</span><br><span class="line">	// fmt.Println(&quot;Type: %T Value: %v\n&quot;, ToBe, ToBe);</span><br><span class="line">	// fmt.Println(&quot;Type: %T value: %v\n&quot;, MaxInt, MaxInt);</span><br><span class="line">	fmt.Printf(&quot;Type %T value: %v\n&quot;, ToBe, ToBe);</span><br><span class="line">	fmt.Printf(&quot;Type: %T value: %v\n&quot;, MaxInt, MaxInt);</span><br><span class="line">	fmt.Printf(&quot;Type: %T value: %v\n&quot;, z, z);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="零值"><a href="#零值" class="headerlink" title="零值"></a>零值</h3><p>没有明确初始值的变量声明会被赋予它们的<strong>零值</strong><br>零值：数值类型为 0；布尔类型为false；字符串为” “空字符串</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> i <span class="hljs-keyword">int</span></span><br><span class="line">	<span class="hljs-keyword">var</span> f <span class="hljs-keyword">float64</span></span><br><span class="line">	<span class="hljs-keyword">var</span> b <span class="hljs-keyword">bool</span></span><br><span class="line">	<span class="hljs-keyword">var</span> s <span class="hljs-keyword">string</span></span><br><span class="line">	fmt.Printf(<span class="hljs-string">"%v %v %q %q\n"</span>, i, f, b, s)<span class="hljs-comment">// %v 打印值；%T 打印类型，%q 打印全部信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><p>表达式<code>T(v)</code>将值<code>v</code>转换为类型<code>T</code><br>一些关于数值的转换：</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> i <span class="hljs-keyword">int</span> = <span class="hljs-number">42</span></span><br><span class="line"><span class="hljs-keyword">var</span> f <span class="hljs-keyword">float64</span> = <span class="hljs-keyword">float64</span>(i)</span><br><span class="line"><span class="hljs-keyword">var</span> u <span class="hljs-keyword">int</span> = <span class="hljs-keyword">uint</span>(f)</span><br><span class="line"><span class="hljs-comment">// 或者，更加简单的形式：</span></span><br><span class="line">i := <span class="hljs-number">42</span></span><br><span class="line">f := <span class="hljs-keyword">float64</span>(i)</span><br><span class="line">u := <span class="hljs-keyword">uint</span>(f)</span><br></pre></td></tr></table></figure>
<p>与 C 不同的是，Go 在不同类型的项之间赋值时需要显式转换。试着移除例子中 float64 或 uint 的转换看看会发生什么。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> x, y <span class="hljs-keyword">int</span> = <span class="hljs-number">3</span>, <span class="hljs-number">4</span></span><br><span class="line">	<span class="hljs-comment">// var f float64 = math.Sqrt(float64(x*x + y*y))</span></span><br><span class="line">	<span class="hljs-comment">// var u uint = uint(f)</span></span><br><span class="line">	<span class="hljs-comment">// var f = math.Sqrt(float64(x*x + y*y))</span></span><br><span class="line">	<span class="hljs-comment">// var u = uint(f)</span></span><br><span class="line">	f := math.Sqrt(<span class="hljs-keyword">float64</span>(x*x + y*y))</span><br><span class="line">	u := <span class="hljs-keyword">uint</span>(f)</span><br><span class="line">	<span class="hljs-comment">// fmt.Printf(x, f, u)  fmt.Printf针对string</span></span><br><span class="line">	fmt.Println(x, f, u)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="类型推导"><a href="#类型推导" class="headerlink" title="类型推导"></a>类型推导</h3><p>在声明一个变量而不指定其类型时(即不使用带<code>:=</code>或者<code>var=</code>表达式)，变量的类型由右值推导得出。当右值声明了类型时，新变量的类型与其相同：</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> i <span class="hljs-keyword">int</span></span><br><span class="line">j := i <span class="hljs-comment">// j 也是一个 int</span></span><br></pre></td></tr></table></figure>
<p>不过当右边包含未指明类型的数值常量时，新变量的类型就可能是<code>int, float64, complex128</code>, 取决于常量的精度类型:</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">i := <span class="hljs-number">2</span>  <span class="hljs-comment">// int</span></span><br><span class="line">f := <span class="hljs-number">3.142</span> <span class="hljs-comment">// float64</span></span><br><span class="line">g := <span class="hljs-number">0.867</span> + <span class="hljs-number">0.5i</span> <span class="hljs-comment">//complex128</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	v := <span class="hljs-number">42</span> <span class="hljs-comment">// 修改这里！</span></span><br><span class="line">	fmt.Printf(<span class="hljs-string">"v is of type %T\n"</span>, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><p>常量的声明与变量类似，只不过是使用<code>const</code>关键字。<br>常量可以是字符、字符串、布尔值或数值。<br>常量<strong>不能用</strong><code>:=</code>语法声明。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span></span><br><span class="line"><span class="hljs-keyword">const</span> Pi = <span class="hljs-number">3.14</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">const</span> World = <span class="hljs-string">"世界"</span></span><br><span class="line">	fmt.Println(<span class="hljs-string">"Hello"</span>, World)</span><br><span class="line">	fmt.Println(<span class="hljs-string">"Happy"</span>, Pi, <span class="hljs-string">"Day"</span>)</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">const</span> Truth = <span class="hljs-literal">true</span></span><br><span class="line">	fmt.Println(<span class="hljs-string">"Go rules?"</span>, Truth)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数值常量"><a href="#数值常量" class="headerlink" title="数值常量"></a>数值常量</h3><p>数值常量是高精度的 值。<br>一个未指定类型的常量由上下文来决定其类型。<br><code>int</code>类型最大可以存储一个 64 位的整数，有时会更小。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">const</span> (</span><br><span class="line">	<span class="hljs-comment">// create a huge number by shifting 1 bit left 100 spaces</span></span><br><span class="line">	<span class="hljs-comment">// In other words, the binary number that is 1 followed by 100 zeros</span></span><br><span class="line">	Big = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">100</span> </span><br><span class="line">	<span class="hljs-comment">// shift it right again in 99 places, so we end up with 1&lt;&lt;1 or 2. the binary number</span></span><br><span class="line">	Small = Big &gt;&gt; <span class="hljs-number">99</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">needInt</span><span class="hljs-params">(x <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>*x + <span class="hljs-number">1</span>&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">needFloat</span><span class="hljs-params">(x <span class="hljs-keyword">float64</span>)</span> <span class="hljs-title">float64</span></span> &#123; <span class="hljs-keyword">return</span> x * <span class="hljs-number">0.1</span>&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// fmt.Println(Big)</span></span><br><span class="line">	fmt.Println(Small)</span><br><span class="line"></span><br><span class="line">	fmt.Println(needInt(Small))</span><br><span class="line">	fmt.Println(needFloat(Small))</span><br><span class="line">	fmt.Println(needFloat(Big))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="流程控制语句"><a href="#流程控制语句" class="headerlink" title="流程控制语句"></a>流程控制语句</h2><h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><p>Go 只有一种循环结构：<code>for</code>循环。<br>基本的 for 循环由三部分组成，它们用分号隔开：</p>
<ol>
<li>初始化语句：在第一次迭代前执行</li>
<li>条件表达式：在每次迭代前求值</li>
<li>后置语句：在每次迭代的结尾执行</li>
</ol>
<p>[注意] 初始化语句通常为一句<strong>短变量声明</strong>，该变量声明仅在 for 语句的作用域中可见。<br>一旦条件表达式的布尔值为 false，循环迭代就会终止。<br>和<code>C、Java、JavaScript</code>之类的语言不同，<code>Go</code>的<code>for</code>语句后面没有小括号，大括号 { } 则是必须的。<br>初始化语句和后置语句是可选的。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// var sum int = 1</span></span><br><span class="line">	<span class="hljs-comment">// var sum = 1</span></span><br><span class="line">	<span class="hljs-comment">// var (</span></span><br><span class="line">	<span class="hljs-comment">// 	sum int = 1</span></span><br><span class="line">	<span class="hljs-comment">// )</span></span><br><span class="line">	sum := <span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> i:=<span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++ &#123;</span><br><span class="line">		sum += i</span><br><span class="line">		fmt.Println(sum)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(sum)</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// exchange</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// var sum = 0</span></span><br><span class="line">	<span class="hljs-comment">// var sum int = 0</span></span><br><span class="line">	<span class="hljs-comment">// var (</span></span><br><span class="line">	<span class="hljs-comment">// 	sum int = 1</span></span><br><span class="line">	<span class="hljs-comment">// )</span></span><br><span class="line">	sum := <span class="hljs-number">1</span></span><br><span class="line">	<span class="hljs-keyword">for</span> ;sum&lt; <span class="hljs-number">10</span>; &#123;</span><br><span class="line">		sum += sum</span><br><span class="line">		fmt.Println(sum)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="for-是-Go-中的-“while”"><a href="#for-是-Go-中的-“while”" class="headerlink" title="for 是 Go 中的 “while”"></a>for 是 Go 中的 “while”</h3><p>此时你可以去掉分号，因为 C 的<code>while</code>在 Go 中叫做<code>for</code>。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	sum := <span class="hljs-number">1</span></span><br><span class="line">	<span class="hljs-keyword">for</span> sum &lt; <span class="hljs-number">1000</span> &#123;</span><br><span class="line">		sum += sum</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="无限循环"><a href="#无限循环" class="headerlink" title="无限循环"></a>无限循环</h3><p>如果省略循环条件，该循环就不会结束，因此无限循环可以写得很紧凑。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">    <span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">    <span class="hljs-keyword">for</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><p>Go 的 if 语句与 for 循环类似，表达式外无需小括号 <code>( )</code>，而大括号 <code>{ }</code> 则是必须的。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sqrt</span><span class="hljs-params">(x <span class="hljs-keyword">float64</span>)</span> <span class="hljs-title">string</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> &#123;</span><br><span class="line">		<span class="hljs-comment">// return string(math.Sqrt(-x)) + "i" error</span></span><br><span class="line">		<span class="hljs-comment">// return math.Sqrt(x) cannot convert float64 into string</span></span><br><span class="line">		<span class="hljs-keyword">return</span> sqrt(-x)+<span class="hljs-string">"i"</span></span><br><span class="line">	&#125; </span><br><span class="line">	<span class="hljs-keyword">return</span> fmt.Sprint(math.Sqrt(x)) <span class="hljs-comment">// use Sprint to convert float64 into string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(sqrt(<span class="hljs-number">2</span>), sqrt(<span class="hljs-number">-4</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="if-的简短语句"><a href="#if-的简短语句" class="headerlink" title="if 的简短语句"></a>if 的简短语句</h3><p>同 for 一样， if 语句<strong>可以在条件表达式前执行一个简单的语句</strong>。<br>该语句声明的变量作用域仅在 if 之内。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">pow</span><span class="hljs-params">(x, n, lim <span class="hljs-keyword">float64</span>)</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> v := math.Pow(x, n); v &lt; lim &#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> v</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">return</span> lim</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(</span><br><span class="line">		pow(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">10</span>),</span><br><span class="line">		pow(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">20</span>),</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="if-和-else"><a href="#if-和-else" class="headerlink" title="if 和 else"></a>if 和 else</h3><p>在 if 的<strong>简短语句中声明的变量同样可以在任何对应的 else 块中使用</strong>。</p>
<p>（在 main 的 <code>fmt.Println</code> 调用开始前，两次对 pow 的调用均已执行并返回。）</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">pow</span><span class="hljs-params">(x, n, lim <span class="hljs-keyword">float64</span>)</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> v := math.Pow(x, n); v &lt; lim &#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> v</span><br><span class="line">	&#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="hljs-string">"%g &gt;= %g\n"</span>, v, lim)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">return</span> lim</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(</span><br><span class="line">		pow(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">10</span>),</span><br><span class="line">		pow(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">20</span>),</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="练习：循环与函数"><a href="#练习：循环与函数" class="headerlink" title="练习：循环与函数"></a>练习：循环与函数</h3><p>我们来实现一个平方根函数：用牛顿法实现平方根函数。<br>计算机通常使用循环来计算 x 的平方根。从某个猜测的值 z 开始，我们可以根据 z² 与 x 的近似度来调整 z，产生一个更好的猜测：<code>z -= (z*z - x) / (2*z)</code><br>重复调整的过程，猜测的结果会越来越精确，得到的答案也会尽可能接近实际的平方根。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Sqrt</span><span class="hljs-params">(x <span class="hljs-keyword">float64</span>)</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	z := <span class="hljs-keyword">float64</span>(<span class="hljs-number">1</span>)</span><br><span class="line">	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;</span><br><span class="line">		z -= (z*z - x)/(<span class="hljs-number">2</span>*z)</span><br><span class="line">		fmt.Println(z)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">return</span> z</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(Sqrt(<span class="hljs-number">2</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h3><p><code>switch</code> 是编写一连串 <code>if - else</code> 语句的简便方法。它运行第一个值等于条件表达式的 case 语句。<br>GO的switch语句类似于 <code>C、C++、Java、JavaScript 和 PHP</code> 中的，不过 <strong>Go 只运行选定的 case</strong>，而非之后所有的 case。 实际上，Go 自动提供了在这些语言中每个 case 后面所需的 <code>break</code> 语句。 除非以 <code>fallthrough</code> 语句结束，否则分支会自动终止。<br>Go 的另一点<strong>重要的不同在于 switch 的 case 无需为常量，且取值不必为整数。</strong></p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"runtime"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Print(<span class="hljs-string">"Go runs on: "</span>)</span><br><span class="line">	<span class="hljs-keyword">switch</span> os := runtime.GOOS; os &#123;</span><br><span class="line">	<span class="hljs-keyword">case</span> <span class="hljs-string">"darwin"</span>:</span><br><span class="line">		fmt.Println(<span class="hljs-string">"OS X."</span>)</span><br><span class="line">	<span class="hljs-keyword">case</span> <span class="hljs-string">"runtime"</span>:</span><br><span class="line">		fmt.Println(<span class="hljs-string">"Linux."</span>)</span><br><span class="line">	<span class="hljs-keyword">default</span>:</span><br><span class="line">		<span class="hljs-comment">// freebsd, openbsd,</span></span><br><span class="line">		<span class="hljs-comment">// plan9, windows...</span></span><br><span class="line">		fmt.Printf(<span class="hljs-string">"%s."</span>, os)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="switch-的求值顺序"><a href="#switch-的求值顺序" class="headerlink" title="switch 的求值顺序"></a>switch 的求值顺序</h3><p>switch 的 case 语句从上到下顺次执行，直到匹配成功时停止。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">switch</span> i &#123;</span><br><span class="line"><span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:</span><br><span class="line"><span class="hljs-keyword">case</span> f():</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 i==0 时 f 不会被调用。）<br><em>注意：</em> Go 练习场中的时间总是从 2009-11-10 23:00:00 UTC 开始，该值的意义留给读者去发现。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"time"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt .Println(<span class="hljs-string">"when is Saturday?"</span>);</span><br><span class="line">	today := time.Now().Weekday();</span><br><span class="line">	<span class="hljs-comment">// fmt.Println(today);</span></span><br><span class="line">	<span class="hljs-comment">// fmt.Printf("%v %T\n", today, today);</span></span><br><span class="line">	<span class="hljs-comment">// fmt.Printf("%v %T\n", time.Now(), time.Now());</span></span><br><span class="line">	<span class="hljs-keyword">switch</span> time.Saturday &#123;</span><br><span class="line">		<span class="hljs-keyword">case</span> today + <span class="hljs-number">0</span> :</span><br><span class="line">			fmt.Println(<span class="hljs-string">"Today"</span>);</span><br><span class="line">		<span class="hljs-keyword">case</span> today + <span class="hljs-number">1</span> :</span><br><span class="line">			fmt.Println(<span class="hljs-string">"Tomorrow"</span>);</span><br><span class="line">		<span class="hljs-keyword">case</span> today + <span class="hljs-number">2</span> :</span><br><span class="line">			fmt.Println(<span class="hljs-string">"in two days"</span>);</span><br><span class="line">		<span class="hljs-keyword">default</span>:</span><br><span class="line">			fmt.Println(<span class="hljs-string">"too far away"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="没有条件的-switch"><a href="#没有条件的-switch" class="headerlink" title="没有条件的 switch"></a>没有条件的 switch</h3><p>没有条件的 switch 同 <code>switch true</code> 一样。<br>这种形式能将一长串 <code>if-then-else</code> 写得更加清晰。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"time"</span></span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	t := time.Now()</span><br><span class="line">	<span class="hljs-keyword">switch</span> &#123;</span><br><span class="line">	<span class="hljs-keyword">case</span> t.Hour() &lt; <span class="hljs-number">12</span>:</span><br><span class="line">		fmt.Println(<span class="hljs-string">"Good morning"</span>)</span><br><span class="line">	<span class="hljs-keyword">case</span> t.Hour() &lt; <span class="hljs-number">18</span>:</span><br><span class="line">		fmt.Println(<span class="hljs-string">"Good afternoon"</span>)</span><br><span class="line">	<span class="hljs-keyword">case</span> t.Hour() &lt; <span class="hljs-number">24</span>:</span><br><span class="line">		fmt.Println(<span class="hljs-string">"Good night"</span>)</span><br><span class="line">	<span class="hljs-keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="hljs-string">"Good day"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h3><p>defer 语句会将函数推迟到外层函数返回之后执行。<br>推迟调用的函数其参数会立即求值，但<strong>直到外层函数返回前该函数都不会被调用</strong>。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">defer</span> fmt.Println(<span class="hljs-string">"hello defer"</span>)<span class="hljs-comment">//相对main函数</span></span><br><span class="line">	fmt.Println(<span class="hljs-string">"world"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="defer-栈"><a href="#defer-栈" class="headerlink" title="defer 栈"></a>defer 栈</h3><p>推迟的函数调用会被压入一个栈中。当外层函数返回时，被推迟的函数会按照后进先出的顺序调用。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="hljs-string">"counting"</span>)</span><br><span class="line">	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;</span><br><span class="line">		<span class="hljs-keyword">defer</span> fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="hljs-string">"done"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="更多类型-struct-slice-and-映射"><a href="#更多类型-struct-slice-and-映射" class="headerlink" title="更多类型 struct, slice and 映射"></a>更多类型 struct, slice and 映射</h2><h3 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h3><p>Go 拥有指针。指针保存了值的内存地址(指针就是一个指向地址的数据)。<strong>在go中获得该变量的内存地址 用&amp;a, 别名而已，并没有占用内存空间。实际上他们是同一个东西，在内存中占用同样的一个存储单元。</strong><br><strong>go中所有的都是按值传递，对于复杂类型，传的是指针的拷贝</strong></p>
<ol>
<li>类型 <code>*T</code> 是指向 <code>T</code> 类型值的指针。其零值为 <code>nil</code>。<br><code>var p *int</code></li>
<li><code>&amp;</code> 操作符会生成一个指向其操作数的<strong>指针</strong>(<code>&amp;</code>取地址值)。</li>
</ol>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">i :=<span class="hljs-number">42</span></span><br><span class="line">p = &amp;i</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><code>*</code> 操作符表示指针指向的<strong>底层值</strong>(<code>*</code>取内容值)。</li>
</ol>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(*p)<span class="hljs-comment">// 通过指针 p 读取 i</span></span><br><span class="line">*p = <span class="hljs-number">21</span>         <span class="hljs-comment">// 通过指针 p 设置 i</span></span><br><span class="line"><span class="hljs-comment">// example</span></span><br><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	i := <span class="hljs-number">43</span>;</span><br><span class="line">	<span class="hljs-comment">// p := &amp;i;</span></span><br><span class="line">	<span class="hljs-keyword">var</span> p *<span class="hljs-keyword">int</span> = &amp;i;</span><br><span class="line">	j := *p;</span><br><span class="line">	j = <span class="hljs-number">1</span>;</span><br><span class="line">	*p = <span class="hljs-number">3</span>;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"value: %v type: %T\n"</span>, i, i);</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"value: %v type: %T\n"</span>, p, p);</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"value: %v type: %T\n"</span>, j, j);	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这也就是通常所说的“间接引用”或“重定向”。<br>与 C 不同，Go 没有指针运算。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// i, j := 43, 8782;</span></span><br><span class="line">	<span class="hljs-comment">// // var p *int = &amp;i;</span></span><br><span class="line">	<span class="hljs-comment">// p := &amp;i; // pointer p to i</span></span><br><span class="line">	<span class="hljs-comment">// fmt.Printf("address: %v value: %v\n", p, *p);</span></span><br><span class="line">	<span class="hljs-comment">// fmt.Printf("%p\n", &amp;j)</span></span><br><span class="line">	</span><br><span class="line">	<span class="hljs-comment">// Learnin pointer</span></span><br><span class="line">	<span class="hljs-keyword">var</span> m <span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span> = <span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span> &#123;</span><br><span class="line">		<span class="hljs-number">0</span>: <span class="hljs-string">"00"</span>,</span><br><span class="line">		<span class="hljs-number">1</span>: <span class="hljs-string">"11"</span>,</span><br><span class="line">	&#125;;</span><br><span class="line">	mm := m; <span class="hljs-comment">//deep copy m value to mm</span></span><br><span class="line">	<span class="hljs-keyword">var</span> values = <span class="hljs-number">4</span>; <span class="hljs-comment">// 如果是简单的类型，深拷贝</span></span><br><span class="line">	values2 := values;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"values value: %v address:  %p\n"</span>, values, &amp;values);</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"values2 value: %v address:  %p\n"</span>, values2, &amp;values2); </span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">var</span> mapLiu <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span> = <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span> &#123;</span><br><span class="line">		<span class="hljs-string">"0"</span>: <span class="hljs-string">"www"</span>,</span><br><span class="line">		<span class="hljs-string">"1"</span>: <span class="hljs-string">"xxxx"</span>,</span><br><span class="line">	&#125;;</span><br><span class="line">	mapLiu2 := mapLiu; <span class="hljs-comment">// 如果是复杂类型， 浅拷贝</span></span><br><span class="line">	fmt.Printf(<span class="hljs-string">"mapLiu value: %v address:  %p\n"</span>, mapLiu, mapLiu);</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"mapLiu2 value: %v address:  %p\n"</span>, mapLiu2, mapLiu2); </span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="hljs-string">"m value: %v address: %p\n"</span>,m, m);</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"mm value: %v address: %p\n"</span>, mm, mm);</span><br><span class="line">	<span class="hljs-comment">// fmt.Printf("m value: %v address: %v\n",m, &amp;m);</span></span><br><span class="line">	<span class="hljs-comment">// fmt.Printf("mm value: %v address: %v\n", mm, &amp;mm);</span></span><br><span class="line">	</span><br><span class="line">	changeMap(m); <span class="hljs-comment">//(1) go中所有的都是按值传递，对于复杂类型，传的是指针的拷贝``</span></span><br><span class="line">	<span class="hljs-comment">// changeMap(&amp;m); // (2) 直接传指针 也是传指针的拷贝</span></span><br><span class="line">	fmt.Printf(<span class="hljs-string">"m value: %v address: %p\n"</span>,m, m);</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"mm value: %v address: %p\n"</span>, mm, mm);</span><br><span class="line"></span><br><span class="line">	<span class="hljs-comment">// （3）</span></span><br><span class="line">	<span class="hljs-comment">// 形参 和 实参</span></span><br><span class="line">	<span class="hljs-comment">// param := 3;</span></span><br><span class="line">	<span class="hljs-comment">// fmt.Printf("param value: %v address: %p\n",param, &amp;param);</span></span><br><span class="line">	<span class="hljs-comment">// changeParam(param);</span></span><br><span class="line">	<span class="hljs-comment">// fmt.Printf("param value: %v address: %p\n",param, &amp;param);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// (1)</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">changeMap</span><span class="hljs-params">(mmm <span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span>)</span></span> &#123;</span><br><span class="line">	mmm[<span class="hljs-number">1</span>] = <span class="hljs-string">"eeee"</span>;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"changeMap func value: %v address: %p\n"</span>, mmm, &amp;mmm);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// (2)</span></span><br><span class="line"><span class="hljs-comment">// func changeMap(mmmm *map[int]string) &#123;</span></span><br><span class="line"><span class="hljs-comment">// 	// temp := *mmmm;</span></span><br><span class="line"><span class="hljs-comment">// 	// temp[0] = "啛啛喳喳";</span></span><br><span class="line"><span class="hljs-comment">// 	// fmt.Printf("func changeMap value: %v address: %p\n", temp, &amp;temp);</span></span><br><span class="line"><span class="hljs-comment">// 	mmmm = nil;</span></span><br><span class="line"><span class="hljs-comment">// 	// *mmmm = nil;</span></span><br><span class="line"><span class="hljs-comment">// 	fmt.Printf("func changeMap value: %v address: %p\n", mmmm, mmmm);</span></span><br><span class="line"><span class="hljs-comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// (3)</span></span><br><span class="line"><span class="hljs-comment">// func changeParam(x int) &#123;</span></span><br><span class="line"><span class="hljs-comment">// 	x = 2222;</span></span><br><span class="line"><span class="hljs-comment">// 	fmt.Printf("func changeParam value: %v address: %p\n", x, &amp;x);</span></span><br><span class="line"><span class="hljs-comment">// &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h3><p>一个结构体（struct）就是一个 字段的集合。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X <span class="hljs-keyword">int</span></span><br><span class="line">	Y <span class="hljs-keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(Vertex&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="结构体字段"><a href="#结构体字段" class="headerlink" title="结构体字段"></a>结构体字段</h3><p>结构体字段使用点号来访问。 </p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X <span class="hljs-keyword">int</span></span><br><span class="line">	Y <span class="hljs-keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	v := Vertex&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;</span><br><span class="line">	v.X = <span class="hljs-number">3</span></span><br><span class="line">	fmt.Println(v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="结构体指针"><a href="#结构体指针" class="headerlink" title="结构体指针"></a>结构体指针</h3><ol>
<li>结构体字段可以通过<strong>结构体指针</strong>来访问。</li>
<li>如果我们有一个指向结构体的指针 p，那么可以通过 <code>(*p).X</code> 来访问其字段 X。不过这么写太啰嗦了，所以语言也允许我们使用<strong>隐式间接引用</strong>，直接写 p.X 就可以。</li>
</ol>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X <span class="hljs-keyword">int</span></span><br><span class="line">	Y <span class="hljs-keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	v := Vertex&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;</span><br><span class="line">	p := &amp;v</span><br><span class="line">	<span class="hljs-comment">// (*p).X = 4</span></span><br><span class="line">	<span class="hljs-comment">// fmt.Println(*p)</span></span><br><span class="line">	p.X = <span class="hljs-number">3e3</span></span><br><span class="line">	fmt.Println(*p)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="结构体文法"><a href="#结构体文法" class="headerlink" title="结构体文法"></a>结构体文法</h3><ol>
<li>结构体文法通过直接列出字段的值来新分配一个结构体。</li>
<li>使用 <code>Name:</code> 语法可以仅列出部分字段。（字段名的顺序无关。）</li>
<li>特殊的前缀 <code>&amp;</code> 返回一个指向结构体的指针。</li>
</ol>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex  <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="hljs-keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-keyword">var</span> (</span><br><span class="line">	v1 = Vertex&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;; <span class="hljs-comment">// has type Vertex</span></span><br><span class="line">	v2 = Vertex&#123;X: <span class="hljs-number">1</span>&#125;; <span class="hljs-comment">// Y: 0 is implicit</span></span><br><span class="line">	v3 = Vertex&#123;&#125;;		<span class="hljs-comment">// X:0 Y:0</span></span><br><span class="line">	<span class="hljs-comment">// p = &amp;Vertex&#123;1, 2&#125; // has type *Vertex</span></span><br><span class="line">	p = &amp;v1;</span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> pointer *<span class="hljs-keyword">int</span>;</span><br><span class="line">	fmt.Println(pointer);</span><br><span class="line">	fmt.Println(v1, v2, v3, p);</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"v1 address: %p value: %v\n"</span>, &amp;v1, v1);</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"p address: %p value: %v\n"</span>, p, *p); <span class="hljs-comment">// 指针为同一个地址</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>类型 <code>[n]T</code> 表示拥有 <code>n 个 T</code> 类型的值 的数组。<br>表达式 会将变量 <code>a</code> 声明为拥有有 <code>10</code> 个整数的数组。<br>将数组看作一个特殊的struct，结构的字段名对应数组的索引，同时成员的数目固定</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> a [<span class="hljs-number">10</span>]<span class="hljs-keyword">int</span></span><br></pre></td></tr></table></figure>
<p>数组的长度是其类型的一部分，因此数组不能改变大小。这看起来是个限制，不过没关系，Go 提供了更加便利的方式来使用数组。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// array</span></span><br><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> a [<span class="hljs-number">2</span>]<span class="hljs-keyword">string</span>; </span><br><span class="line">	a[<span class="hljs-number">0</span>] = <span class="hljs-string">"hellp"</span>;</span><br><span class="line">	a[<span class="hljs-number">1</span>] = <span class="hljs-string">"ekedd"</span>;</span><br><span class="line">	fmt.Println(a);</span><br><span class="line">	fmt.Println(a[<span class="hljs-number">0</span>], a[<span class="hljs-number">1</span>]);</span><br><span class="line">	primes := [<span class="hljs-number">6</span>]<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>&#125;;</span><br><span class="line">	fmt.Println(primes);</span><br><span class="line">	<span class="hljs-keyword">var</span> m <span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span> = <span class="hljs-keyword">map</span>[<span class="hljs-keyword">int</span>]<span class="hljs-keyword">string</span> &#123;</span><br><span class="line">		<span class="hljs-number">1</span>: <span class="hljs-string">"www0"</span>,</span><br><span class="line">		<span class="hljs-number">2</span>: <span class="hljs-string">"sss"</span>,</span><br><span class="line">	&#125;;</span><br><span class="line">	fmt.Println(m);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="切片-slices"><a href="#切片-slices" class="headerlink" title="切片(slices)"></a>切片(slices)</h3><p>每个数组的大小都是固定的。而切片则为数组元素提供动态大小的、灵活的视角。在实践中，切片比数组更常用。<br>类型<code>[]T</code>表示一个元素类型为<code>T</code>的切片<br>切片通过两个下标来界定，即一个上界和一个下界，二者以冒号分隔:<br><code>a[low : high] 即 var s []int = primes[1 : 4]</code><br>他会选择一个半开区间，左闭右开(美国人的习惯)<br>以下表达式创建了一个切片，包含了a中下标从1到3的元素:<br><code>a[1:3]</code></p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">//slices</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// var primes [6]int = [6]int&#123;2, 3, 5, 7, 11, 13&#125;</span></span><br><span class="line">	<span class="hljs-comment">// fmt.Println(primes)</span></span><br><span class="line">	primes := [<span class="hljs-number">6</span>]<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>&#125;</span><br><span class="line">	<span class="hljs-keyword">var</span> s []<span class="hljs-keyword">int</span> = primes[<span class="hljs-number">1</span> : <span class="hljs-number">4</span>]</span><br><span class="line">	fmt.Println(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="切片就像数组的引用-slices-are-like-references-to-arrays"><a href="#切片就像数组的引用-slices-are-like-references-to-arrays" class="headerlink" title="切片就像数组的引用(slices are like references to arrays)"></a>切片就像数组的引用(slices are like references to arrays)</h3><p>切片<strong>并不存储任何数据</strong>，它只是描述了底层数组中的一段(引用)。更改切片的元素会修改其底层数组中对应的元素。与它共享底层数组的切片都会观测到这些修改。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// slices are like references to arrays</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// var names [4]string = [4]string&#123;&#125;</span></span><br><span class="line">	names := [<span class="hljs-number">4</span>]<span class="hljs-keyword">string</span>&#123;</span><br><span class="line">		<span class="hljs-string">"John"</span>,</span><br><span class="line">		<span class="hljs-string">"Paul"</span>,</span><br><span class="line">		<span class="hljs-string">"George"</span>,</span><br><span class="line">		<span class="hljs-string">"Ringo"</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(names)</span><br><span class="line">	a := names[<span class="hljs-number">0</span> : <span class="hljs-number">2</span>]</span><br><span class="line">	b := names[<span class="hljs-number">1</span> : <span class="hljs-number">3</span>]</span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">	b[<span class="hljs-number">0</span>] = <span class="hljs-string">"XXXX"</span></span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">	fmt.Println(names)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="切片文法-slices-literals"><a href="#切片文法-slices-literals" class="headerlink" title="切片文法(slices literals)"></a>切片文法(slices literals)</h3><p>切片文法类似于没有长度的数组文法。<br>这是一个数组文法：<br><code>[3]bool{true, true, false}</code><br>下面这样则会创建一个和上面相同的数组，然后构建一个引用了它的切片：<br><code>[]bool{true, true, false}</code></p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// slices literals</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// create array</span></span><br><span class="line">	<span class="hljs-keyword">var</span> array [<span class="hljs-number">4</span>]<span class="hljs-keyword">int</span> = [<span class="hljs-number">4</span>]<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"value: %v, Type: %T\n"</span>, array, array)</span><br><span class="line">	array2 := [<span class="hljs-number">4</span>]<span class="hljs-keyword">bool</span>&#123;<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"value: %v Type: %T\n"</span>, array2, array2)</span><br><span class="line">	<span class="hljs-comment">// create slices</span></span><br><span class="line">	<span class="hljs-keyword">var</span> q []<span class="hljs-keyword">int</span> = []<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"value: %v Type:%T\n"</span>, q, q)</span><br><span class="line">	q2 := []<span class="hljs-keyword">bool</span>&#123;<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"value: %v Type: %T\n"</span>, q2, q2)</span><br><span class="line">	<span class="hljs-comment">// create slices with struct</span></span><br><span class="line">	<span class="hljs-keyword">var</span> s1 []<span class="hljs-keyword">struct</span>&#123;</span><br><span class="line">		i <span class="hljs-keyword">int</span></span><br><span class="line">		b <span class="hljs-keyword">bool</span></span><br><span class="line">	&#125; = []<span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">		i <span class="hljs-keyword">int</span></span><br><span class="line">		b <span class="hljs-keyword">bool</span></span><br><span class="line">	&#125;&#123;</span><br><span class="line">		&#123;<span class="hljs-number">2</span>, <span class="hljs-literal">false</span>&#125;,</span><br><span class="line">		&#123;<span class="hljs-number">3</span>, <span class="hljs-literal">true</span>&#125;,</span><br><span class="line">		&#123;<span class="hljs-number">1</span>, <span class="hljs-literal">true</span>&#125;,</span><br><span class="line">		&#123;<span class="hljs-number">6</span>, <span class="hljs-literal">false</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"value:%v Type: %T\n"</span>, s1, s1)</span><br><span class="line">	s := []<span class="hljs-keyword">struct</span>&#123;</span><br><span class="line">		i <span class="hljs-keyword">int</span></span><br><span class="line">		b <span class="hljs-keyword">bool</span></span><br><span class="line">	&#125;&#123;</span><br><span class="line">		&#123;<span class="hljs-number">1</span>, <span class="hljs-literal">true</span>&#125;,</span><br><span class="line">		&#123;<span class="hljs-number">3</span>, <span class="hljs-literal">false</span>&#125;,</span><br><span class="line">		&#123;<span class="hljs-number">5</span>, <span class="hljs-literal">false</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"value:%v Type: %T\n"</span>, s, s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="切片的默认行为"><a href="#切片的默认行为" class="headerlink" title="切片的默认行为"></a>切片的默认行为</h3><p>在进行切片时，你可以利用它的默认行为来忽略上下界。切片下界的默认值为 0，上界则是该切片的长度。<br>对于数组<br><code>var a [10]int</code><br>来说，以下切片是等价的：</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="hljs-number">0</span>:<span class="hljs-number">10</span>]</span><br><span class="line">a[:<span class="hljs-number">10</span>]</span><br><span class="line">a[<span class="hljs-number">0</span>:]</span><br><span class="line">a[:]</span><br></pre></td></tr></table></figure>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// slices defaults</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	s := []<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>&#125;</span><br><span class="line">	s1 := s[<span class="hljs-number">1</span>:<span class="hljs-number">4</span>] </span><br><span class="line">	fmt.Println(s, s1)</span><br><span class="line">	s2 := s[:<span class="hljs-number">2</span>]</span><br><span class="line">	fmt.Println(s, s2)</span><br><span class="line">	s2[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span></span><br><span class="line">	<span class="hljs-comment">// slices are like references to array</span></span><br><span class="line">	fmt.Println(s, s1)</span><br><span class="line">	fmt.Println(s, s2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="切片的长度与容量"><a href="#切片的长度与容量" class="headerlink" title="切片的长度与容量"></a>切片的长度与容量</h3><p>切片拥有 <strong>长度</strong> 和 <strong>容量</strong>。<br>切片的长度就是它所包含的元素个数。<br><strong>切片的容量</strong>是从<strong>切片后的第一个元素开始数，到其底层数组元素末尾的个数</strong>。<br>切片 s 的长度和容量可通过表达式 <code>len(s)</code> 和 <code>cap(s)</code> 来获取。 len()获取的切片的得到的长度，cap是指员原来数组的长度。<br>你可以通过重新切片来扩展一个切片，给它提供足够的容量。试着修改示例程序中的切片操作，向外扩展它的容量，看看会发生什么。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// slices go</span></span><br><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printSlices</span><span class="hljs-params">(s []<span class="hljs-keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"len=%d cap=%d %v\n"</span>, <span class="hljs-built_in">len</span>(s), <span class="hljs-built_in">cap</span>(s), s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	s := []<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>,<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>&#125;;</span><br><span class="line">	printSlices(s);</span><br><span class="line">	<span class="hljs-comment">// Slices the slice to give it zero length</span></span><br><span class="line">	s = s[:<span class="hljs-number">0</span>];</span><br><span class="line">	printSlices(s);</span><br><span class="line">	<span class="hljs-comment">// extend th length</span></span><br><span class="line">	s = s[:<span class="hljs-number">4</span>];</span><br><span class="line">	printSlices(s);</span><br><span class="line">	<span class="hljs-comment">// drop its first two values</span></span><br><span class="line">	s = s[:<span class="hljs-number">2</span>];</span><br><span class="line">	printSlices(s); <span class="hljs-comment">//len=2 cap=6 [3 4]</span></span><br><span class="line">	s = s[:<span class="hljs-number">6</span>];</span><br><span class="line">	printSlices(s); <span class="hljs-comment">//len=6 cap=6 [3 4 5 7 8 10]</span></span><br><span class="line">	s = s[<span class="hljs-number">3</span>:<span class="hljs-number">4</span>];</span><br><span class="line">	printSlices(s); <span class="hljs-comment">//len=1 cap=3 [7]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="nil切片"><a href="#nil切片" class="headerlink" title="nil切片"></a>nil切片</h3><p>切片的的零值是nil<br>nil切片的长度和容量为0切没有底层数组。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// nil slices</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// var s = []int //error []int is not expression</span></span><br><span class="line">	<span class="hljs-comment">// var s []int = []int&#123;1, 2, 3&#125; &lt;==&gt; s := []int&#123;1, 2, 3&#125;</span></span><br><span class="line">	<span class="hljs-keyword">var</span> s []<span class="hljs-keyword">int</span></span><br><span class="line">	fmt.Println(s, <span class="hljs-built_in">len</span>(s), <span class="hljs-built_in">cap</span>(s))</span><br><span class="line">	<span class="hljs-keyword">if</span> s == <span class="hljs-literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="hljs-string">"nil"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="用-make-创建切片"><a href="#用-make-创建切片" class="headerlink" title="用 make 创建切片"></a>用 make 创建切片</h3><p>切片可以用内建函数 <code>make</code> 来创建，这也是你创建动态数组的方式。<br><code>make</code> 函数会分配一个<strong>元素为零值</strong>的数组并<strong>返回一个引用了它的切片</strong>：<br><code>a := make([]int, 5)  // len(a)=5</code><br>要指定它的容量，需向 make 传入第三个参数：</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">b := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">int</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>) <span class="hljs-comment">// len(b)=0, cap(b)=5</span></span><br><span class="line">b = b[:<span class="hljs-built_in">cap</span>(b)] <span class="hljs-comment">// len(b)=5, cap(b)=5</span></span><br><span class="line">b = b[<span class="hljs-number">1</span>:]      <span class="hljs-comment">// len(b)=4, cap(b)=4</span></span><br></pre></td></tr></table></figure>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// use make to create slices</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printSlice</span><span class="hljs-params">(s <span class="hljs-keyword">string</span>, x []<span class="hljs-keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"%s len=%d cap=%d value=%v type=%T\n"</span>, s, <span class="hljs-built_in">len</span>(x), <span class="hljs-built_in">cap</span>(x), x, x)</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// x := [3]string&#123;"Лайка", "Белка", "Стрелка"&#125;</span></span><br><span class="line">	<span class="hljs-comment">// s := x[:] // a slice referencing the storage of x</span></span><br><span class="line">	<span class="hljs-comment">// 创建 一个元素值为0的数组并返回一个引用了它的切片</span></span><br><span class="line">	a := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">int</span>, <span class="hljs-number">5</span>) <span class="hljs-comment">// len(a) = 5 cap(a) = 5</span></span><br><span class="line">	printSlice(<span class="hljs-string">"a"</span>, a)</span><br><span class="line">	<span class="hljs-comment">// 创建 一个指定容量， 需要向make传入第三个参数</span></span><br><span class="line">	<span class="hljs-comment">// b := make([]int, 3, 5)	// len(b)=3, cap(b)=5</span></span><br><span class="line">	b := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">int</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>);	<span class="hljs-comment">// len(b)=0, cap(b)=5</span></span><br><span class="line">	printSlice(<span class="hljs-string">"b"</span>, b); 	<span class="hljs-comment">// b len=0 cap=5 value=[] type=[]int</span></span><br><span class="line">	c := b[:<span class="hljs-number">3</span>];</span><br><span class="line">	printSlice(<span class="hljs-string">"c"</span>, c);	<span class="hljs-comment">// c len=3 cap=5 value=[0 0 0] type=[]int</span></span><br><span class="line">	d := c[<span class="hljs-number">2</span>:<span class="hljs-number">5</span>];</span><br><span class="line">	printSlice(<span class="hljs-string">"d"</span>, d); <span class="hljs-comment">// d len=3 cap=3 value=[0 0 0] type=[]int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>[Note]一个切片是一个数组片段的描述。它包含了指向数组的指针，片段的长度， 和容量（片段的最大长度）。前面使用 <code>make([]byte, 5)</code> 创建的切片变量 s ,其中<code>[]int</code>指向数组指针；长度是切片引用的元素数目。容量是底层数组的元素数目（从切片指针开始）。 <a href="https://blog.go-zh.org/go-slices-usage-and-internals" target="_blank" rel="noopener">reference</a></p>
<h3 id="切片的切片"><a href="#切片的切片" class="headerlink" title="切片的切片"></a>切片的切片</h3><p>切片可包含任何类型，甚至包括其它的切片。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// slices of slices</span></span><br><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"strings"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// create a tic-tac-toe board</span></span><br><span class="line">	board := [][]<span class="hljs-keyword">string</span> &#123;</span><br><span class="line">		[]<span class="hljs-keyword">string</span>&#123;<span class="hljs-string">"_"</span>, <span class="hljs-string">"_"</span>, <span class="hljs-string">"_"</span>&#125;,</span><br><span class="line">		[]<span class="hljs-keyword">string</span>&#123;<span class="hljs-string">"_"</span>, <span class="hljs-string">"_"</span>, <span class="hljs-string">"_"</span>&#125;,</span><br><span class="line">		[]<span class="hljs-keyword">string</span>&#123;<span class="hljs-string">"_"</span>, <span class="hljs-string">"_"</span>, <span class="hljs-string">"_"</span>&#125;,</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="hljs-comment">// </span></span><br><span class="line">	board[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-string">"X"</span>;</span><br><span class="line">	board[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>] = <span class="hljs-string">"O"</span>;</span><br><span class="line">	board[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] = <span class="hljs-string">"X"</span>;</span><br><span class="line">	board[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] = <span class="hljs-string">"O"</span>;</span><br><span class="line">	board[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] = <span class="hljs-string">"X"</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(board); i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="hljs-string">"%s\n"</span>, strings.Join(board[i], <span class="hljs-string">" "</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="向切片追加元素"><a href="#向切片追加元素" class="headerlink" title="向切片追加元素"></a>向切片追加元素</h3><p>为切片追加新的元素是种常用的操作，为此 Go 提供了内建的 <code>append</code> 函数。内建函数的文档对此函数有详细的介绍。<br><code>func append(s []T, vs ...T) []T</code><br>append 的第一个参数 <code>s</code> 是一个元素类型为 <code>T</code> 的切片，其余类型为 T 的值将会追加到该切片的末尾。<br>append 的结果是一个包含原切片所有元素加上新添加元素的切片。<br>当 s 的底层数组太小，不足以容纳所有给定的值时，它就会分配一个更大的数组。返回的切片会指向这个新分配的数组。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// append</span></span><br><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printSlices</span><span class="hljs-params">(s []<span class="hljs-keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"len=%d cap=%d value=%v type=%T\n"</span>, <span class="hljs-built_in">len</span>(s), <span class="hljs-built_in">cap</span>(s), s, s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> s []<span class="hljs-keyword">int</span>;</span><br><span class="line">	printSlices(s);</span><br><span class="line">	<span class="hljs-comment">// append works on nil slices</span></span><br><span class="line">	s = <span class="hljs-built_in">append</span>(s, <span class="hljs-number">0</span>);</span><br><span class="line">	printSlices(s);</span><br><span class="line">	<span class="hljs-comment">// the slices grows as needed</span></span><br><span class="line">	s = <span class="hljs-built_in">append</span>(s, <span class="hljs-number">1</span>);</span><br><span class="line">	printSlices(s);</span><br><span class="line">	<span class="hljs-comment">// we can add more than one element at time</span></span><br><span class="line">	s = <span class="hljs-built_in">append</span>(s, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>);</span><br><span class="line">	printSlices(s);</span><br><span class="line">	<span class="hljs-comment">// s1 := []int&#123;7, 4, 2&#125;; // 不是同一种类型</span></span><br><span class="line">	<span class="hljs-comment">// s = append(s, s1);</span></span><br><span class="line">	<span class="hljs-comment">// printSlices(s);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h3><p><code>for</code> 循环的 <code>range</code> 形式可遍历切片或映射。<br>当使用 <code>for</code> 循环遍历切片时，每次迭代都会返回两个值。第一个值为当前元素的下标，第二个值为该下标所对应元素的一份副本。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// Range</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">var</span> pow = []<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>, <span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">128</span>&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">for</span> i, v := <span class="hljs-keyword">range</span> pow &#123;</span><br><span class="line">		fmt.Printf(<span class="hljs-string">"2**%d = %d\n"</span>, i, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以将下标或值赋予 <code>_</code> 来忽略它。<br>若你只需要索引，去掉 <code>, value</code> 的部分即可。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span>(</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	pow := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">int</span>, <span class="hljs-number">10</span>)</span><br><span class="line">	<span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> pow &#123;</span><br><span class="line">		pow[i] = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-keyword">uint</span>(i) <span class="hljs-comment">// ==2**i</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> _, value := <span class="hljs-keyword">range</span> pow &#123;</span><br><span class="line">		fmt.Printf(<span class="hljs-string">"%d\n"</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="练习：切片"><a href="#练习：切片" class="headerlink" title="练习：切片"></a>练习：切片</h3><p>实现 <code>Pic</code>。它应当返回一个长度为 <code>dy</code> 的切片，其中每个元素是一个长度为 dx，元素类型为 <code>uint8</code> 的切片。当你运行此程序时，它会将每个整数解释为灰度值（好吧，其实是蓝度值）并显示它所对应的图像。</p>
<p>图像的选择由你来定。几个有趣的函数包括 <code>(x+y)/2, x*y, x^y, x*log(y)</code> 和 <code>x%(y+1)</code>。</p>
<p>（提示：需要使用循环来分配 <code>[][]uint8</code> 中的每个 <code>[]uint8</code>；请使用 <code>uint8(intValue)</code> 在类型之间转换；你可能会用到 <code>math</code> 包中的函数。）</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"golang.org/x/tour/pic"</span></span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Pic</span><span class="hljs-params">(dx, dy <span class="hljs-keyword">int</span>)</span> [][]<span class="hljs-title">uint8</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> rgb [][]<span class="hljs-keyword">uint8</span></span><br><span class="line">	fmt.Println(dx, dy)</span><br><span class="line">	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i&lt;dy; i++ &#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> j:=<span class="hljs-number">0</span>; j &lt;dx; j++ &#123;</span><br><span class="line">			rgb[i][j] = <span class="hljs-keyword">uint8</span>((i+j)/<span class="hljs-number">2</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">return</span> rgb</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	pic.Show(Pic)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="映射-map"><a href="#映射-map" class="headerlink" title="映射(map)"></a>映射(map)</h3><p>映射将key映射到value。<br>映射的零值为 <code>nil</code> 。<code>nil</code> 映射既没有键，也不能添加键。<br><code>make</code>函数会返回给定类型的映射(map)，并将其初始化备用。<br><code>map type is type: map[string]main.Vertex</code></p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// map</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	Lat, Long <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// initialize map</span></span><br><span class="line"><span class="hljs-keyword">var</span> m <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]Vertex</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	m = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]Vertex)</span><br><span class="line">	m[<span class="hljs-string">"Bell Labs"</span>] = Vertex&#123;</span><br><span class="line">		<span class="hljs-comment">// 40.22234, -74.33113 // error</span></span><br><span class="line">		<span class="hljs-number">40.22234</span>, <span class="hljs-number">-74.33113</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"value: %v type: %T\n"</span>,m, m)</span><br><span class="line">	fmt.Println(m[<span class="hljs-string">"Bell Labs"</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="map的文法-写法"><a href="#map的文法-写法" class="headerlink" title="map的文法(写法)"></a>map的文法(写法)</h3><p>映射的文法与结构体相似，不过必须有键名。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// map literals</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	Lat, Long <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// var s []int</span></span><br><span class="line"><span class="hljs-keyword">var</span> s = []<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;</span><br><span class="line"><span class="hljs-comment">// map 类型 map[string]Vertex</span></span><br><span class="line"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]Vertex&#123;</span><br><span class="line">	<span class="hljs-string">"Bell Labs"</span>: Vertex&#123;</span><br><span class="line">		<span class="hljs-number">40.441245</span>, <span class="hljs-number">-68.421167889</span>,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="hljs-string">"Google"</span>: Vertex&#123;</span><br><span class="line">		<span class="hljs-number">37.3425</span>, <span class="hljs-number">-124.341</span>,</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(m)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>若顶级类型只是一个类型名，你可以在文法的元素中省略它。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	Lat, Long <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]Vertex&#123;</span><br><span class="line">	<span class="hljs-comment">// "Bell Labs": Vertex&#123;</span></span><br><span class="line">	<span class="hljs-comment">// 	30.4422, -44.44212,</span></span><br><span class="line">	<span class="hljs-comment">// &#125;,</span></span><br><span class="line">	<span class="hljs-comment">// "Google": Vertex &#123;</span></span><br><span class="line">	<span class="hljs-comment">// 	39.442, -55.224,</span></span><br><span class="line">	<span class="hljs-comment">// &#125;,</span></span><br><span class="line">	<span class="hljs-string">"Bell"</span>: &#123;<span class="hljs-number">-22.3444</span>, <span class="hljs-number">33.312</span>&#125;,</span><br><span class="line">	<span class="hljs-string">"Google"</span>:&#123;<span class="hljs-number">-33.442</span>, <span class="hljs-number">33.51</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(m)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="修改映射-map"><a href="#修改映射-map" class="headerlink" title="修改映射(map)"></a>修改映射(map)</h3><p>在<code>map m</code>中插入或者修改元素：</p>
<p><code>m[key] = elem</code><br>获取元素:</p>
<p><code>elem = m[key]</code><br>删除元素:</p>
<p><code>delete(m, key)</code><br>通过双赋值检测某个键是否存在:</p>
<p><code>elem, ok = m[key]</code><br>若key在m中，ok为true；否则, ok为false.<br>若key不在map中，那么elem是该map的零值。<br>即当从映射中读取某个不存在的键时，结果是映射的元素类型的零值。<br><strong>注</strong>: 若elem或者ok还未声明，你可以使用短变量声明:</p>
<p><code>elem, ok := m[key]</code></p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	m := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">int</span>);</span><br><span class="line">	m[<span class="hljs-string">"Answer"</span>] = <span class="hljs-number">42</span>;</span><br><span class="line">	fmt.Println(<span class="hljs-string">"The value:"</span>, m[<span class="hljs-string">"Answer"</span>]);</span><br><span class="line">	m[<span class="hljs-string">"Answer"</span>] = <span class="hljs-number">48</span>;</span><br><span class="line">	fmt.Println(<span class="hljs-string">"Thw value:"</span>, m[<span class="hljs-string">"Answer"</span>]);</span><br><span class="line">	<span class="hljs-built_in">delete</span>(m, <span class="hljs-string">"Answer"</span>);</span><br><span class="line">	fmt.Println(<span class="hljs-string">"The value:"</span>, m[<span class="hljs-string">"Answer"</span>]);</span><br><span class="line">	v, ok := m[<span class="hljs-string">"Answer"</span>];</span><br><span class="line">	fmt.Println(<span class="hljs-string">"The value:"</span>, v, <span class="hljs-string">"Present?"</span>, ok);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数值"><a href="#函数值" class="headerlink" title="函数值"></a>函数值</h3><p>函数也是值。它们可以像其它值一样传递。<br>函数值可以用作函数的参数或返回值。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">compute</span><span class="hljs-params">(fn <span class="hljs-keyword">func</span>(<span class="hljs-keyword">float64</span>, <span class="hljs-keyword">float64</span>)</span> <span class="hljs-title">float64</span>) <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	fmt.Println(fn);</span><br><span class="line">	<span class="hljs-keyword">return</span> fn(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	hypot := <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(x, y <span class="hljs-keyword">float64</span>)</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> math.Sqrt(x*x + y*y);</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(hypot(<span class="hljs-number">5</span>, <span class="hljs-number">12</span>));</span><br><span class="line">	fmt.Println(compute(hypot));</span><br><span class="line">	fmt.Println(compute(math.Pow));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数的闭包"><a href="#函数的闭包" class="headerlink" title="函数的闭包"></a>函数的闭包</h3><p>Go 函数可以是一个闭包。闭包是一个函数值，它引用了其函数体之外的变量。该函数可以访问并赋予其引用的变量的值，换句话说，该函数被“绑定”在了这些变量上。<br>例如，函数<code>adder</code>返回一个闭包。每个闭包都被绑定在其各自的 sum 变量上。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">adder</span><span class="hljs-params">()</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123;</span><br><span class="line">	sum := <span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(x <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123;</span><br><span class="line">		sum += x;</span><br><span class="line">		<span class="hljs-keyword">return</span> sum;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	pos, neg := adder(), adder();</span><br><span class="line">	<span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(</span><br><span class="line">			pos(i),</span><br><span class="line">			neg(-i),</span><br><span class="line">		);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="练习：斐波纳契闭包"><a href="#练习：斐波纳契闭包" class="headerlink" title="练习：斐波纳契闭包"></a>练习：斐波纳契闭包</h3><p>实现一个 fibonacci 函数，它返回一个函数（闭包），该闭包返回一个斐波纳契数列 <code>(0, 1, 1, 2, 3, 5, ...)</code>。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// fibonacci is a function that returns</span></span><br><span class="line"><span class="hljs-comment">// a function that returns an int.</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fibonacci</span><span class="hljs-params">()</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-title">int</span></span> &#123;</span><br><span class="line">	last = <span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(x <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123;</span><br><span class="line">		</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	f := fibonacci()</span><br><span class="line">	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;</span><br><span class="line">		fmt.Println(f())</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="方法与接口"><a href="#方法与接口" class="headerlink" title="方法与接口"></a>方法与接口</h2><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p><strong>Go 没有类</strong>。不过你可以为<strong>结构体类型定义方法</strong>。<br>方法就是一类带特殊的 <strong>接收者</strong> 参数的函数。<br>方法接收者在它自己的参数列表内，位于 func 关键字和方法名之间。<br>在此例中，Abs 方法拥有一个名为 <code>v</code>，类型为 <code>Vertex</code> 的接收者。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v Vertex)</span> <span class="hljs-title">Abs</span><span class="hljs-params">()</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	v := Vertex&#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;</span><br><span class="line">	fmt.Println(v.Abs());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="方法即是函数-Methods-class-are-functions"><a href="#方法即是函数-Methods-class-are-functions" class="headerlink" title="方法即是函数(Methods(class) are functions)"></a>方法即是函数(Methods(class) are functions)</h3><p>记住：方法只是个带接收者参数的函数。<br>现在这个 Abs 的写法就是个正常的函数，功能并没有什么变化。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// define a method</span></span><br><span class="line"><span class="hljs-comment">// func (v Vertex) Abs() float64 &#123;</span></span><br><span class="line"><span class="hljs-comment">// 	return math.Sqrt(v.X*v.X + v.Y*v.Y);</span></span><br><span class="line"><span class="hljs-comment">// &#125;</span></span><br><span class="line"><span class="hljs-comment">// function</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Abs</span><span class="hljs-params">(v Vertex)</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	v := Vertex &#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;</span><br><span class="line">	<span class="hljs-comment">// fmt.Println(v.Abs());</span></span><br><span class="line">	fmt.Println(Abs(v));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>你也可以为非结构体类型声明方法。如例子中的一个带Abs方法的数值类型MyFloat。<br>你只能为在同一个包内定义的类型的接受者声明方法，而不能为其他包内定义的类型(包括int之类的内建类型)的接受者声明方法。<br>(注：就是<strong>接收者的类型定义和方法声明必须在同一个包内</strong>；不能为内建类型声明方法。)</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> MyFloat <span class="hljs-keyword">float64</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f MyFloat)</span> <span class="hljs-title">Abs</span><span class="hljs-params">()</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> f &lt; <span class="hljs-number">0</span> &#123;</span><br><span class="line">		 <span class="hljs-keyword">return</span> <span class="hljs-keyword">float64</span>(-f);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-keyword">float64</span>(f);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	f := MyFloat(-math.Sqrt2);</span><br><span class="line">	fmt.Println(f.Abs());</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// example 2</span></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> MyInt <span class="hljs-keyword">int</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(Myint MyInt)</span> <span class="hljs-title">Abs</span><span class="hljs-params">()</span> <span class="hljs-title">int</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> Myint &lt; <span class="hljs-number">0</span> &#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> <span class="hljs-keyword">int</span>(-Myint);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-keyword">int</span>(Myint);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	myint := MyInt(<span class="hljs-number">-2</span>);</span><br><span class="line">	fmt.Println(myint.Abs());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通用：声明的方法为在类中添加方法，必须是初始化类，生成对象调用方法。</p>
<h3 id="指针接收者"><a href="#指针接收者" class="headerlink" title="指针接收者"></a>指针接收者</h3><p>你可以为指针接收者声明方法。<br>这意味着对于某类型 T，接收者的类型可以用 <em>T 的文法。（此外，T 不能是像 </em>int 这样的指针。）<br>例如，这里为 <em>Vertex 定义了 Scale 方法。<br>指针接收者的方法可以修改接收者指向的值（就像 Scale 在这做的）。由于方法经常需要修改它的接收者，指针接收者比值接收者更常用。<br>试着移除第 16 行 Scale 函数声明中的 </em>，观察此程序的行为如何变化。<br>若使用值接收者，那么 Scale 方法会对原始 Vertex 值的副本进行操作。（对于函数的其它参数也是如此。）Scale 方法必须用指针接受者来更改 main 函数中声明的 Vertex 的值。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v Vertex)</span> <span class="hljs-title">Abs</span><span class="hljs-params">()</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *Vertex)</span> <span class="hljs-title">Scale</span><span class="hljs-params">(f <span class="hljs-keyword">float64</span>)</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// (*v).X = (*v).X * f;</span></span><br><span class="line">	<span class="hljs-comment">// (*v).Y = (*v).Y * f;</span></span><br><span class="line">	v.X *= f;</span><br><span class="line">	v.Y *= f;</span><br><span class="line">	<span class="hljs-comment">// </span></span><br><span class="line">	fmt.Printf(<span class="hljs-string">"2 value: %v type: %T address: %p\n"</span>, v, v, v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// func (v Vertex) Scale(f float64) &#123;</span></span><br><span class="line"><span class="hljs-comment">// 	v.X = v.X * f;</span></span><br><span class="line"><span class="hljs-comment">// 	v.Y = v.Y * f;</span></span><br><span class="line"><span class="hljs-comment">// 	fmt.Printf("2 value: %v type: %T address: %p\n", v, v, &amp;v);</span></span><br><span class="line"><span class="hljs-comment">// &#125;</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	v := Vertex&#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"1 value: %v type: %T address: %p\n"</span>, v, v, &amp;v);</span><br><span class="line">	v.Scale(<span class="hljs-number">10</span>);</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"3 value: %v type: %T address %p\n"</span>, v, v, &amp;v);</span><br><span class="line">	fmt.Println(v.Abs());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="指针与函数"><a href="#指针与函数" class="headerlink" title="指针与函数"></a>指针与函数</h3><p>把 Abs 和 Scale 方法重写为函数。接着移除Scale中的*。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Abs</span><span class="hljs-params">(v Vertex)</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Scale</span><span class="hljs-params">(v *Vertex, f <span class="hljs-keyword">float64</span>)</span></span> &#123;</span><br><span class="line">	v.X =  v.X * f;</span><br><span class="line">	v.Y = v.Y * f;</span><br><span class="line">&#125; </span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	v := Vertex&#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;</span><br><span class="line">	Scale(&amp;v, <span class="hljs-number">10</span>);</span><br><span class="line">	fmt.Println(Abs(v));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="方法与指针重定向"><a href="#方法与指针重定向" class="headerlink" title="方法与指针重定向"></a>方法与指针重定向</h3><p>比较前两个程序，你大概会注意到带指针参数的函数必须接受一个指针：</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> v Vertex</span><br><span class="line">ScaleFunc(v, <span class="hljs-number">5</span>)  <span class="hljs-comment">// 编译错误！</span></span><br><span class="line">ScaleFunc(&amp;v, <span class="hljs-number">5</span>) <span class="hljs-comment">// OK</span></span><br></pre></td></tr></table></figure>
<p>而以指针为接受者的方法被调用时，接受者既能为值又能为指针：</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> v Vertex</span><br><span class="line">v.Scale(<span class="hljs-number">5</span>)  <span class="hljs-comment">// OK</span></span><br><span class="line">p := &amp;v</span><br><span class="line">p.Scale(<span class="hljs-number">10</span>) <span class="hljs-comment">// OK</span></span><br></pre></td></tr></table></figure>
<p>对于语句 <code>v.Scale(5)</code>，即便 v 是个值而非指针，带指针接收者的方法也能被直接调用。 也就是说，由于 Scale 方法有一个指针接收者，为方便起见，Go 会将语句 <code>v.Scale(5)</code> 解释为 <code>(&amp;v).Scale(5)</code>。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// define method</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *Vertex)</span> <span class="hljs-title">Scale</span><span class="hljs-params">(f <span class="hljs-keyword">float64</span>)</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// (*v).X *= f;</span></span><br><span class="line">	<span class="hljs-comment">// (*v).Y *= f;</span></span><br><span class="line">	v.X *= f;</span><br><span class="line">	v.Y *= f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// define function</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ScaleFunction</span><span class="hljs-params">(v *Vertex, f <span class="hljs-keyword">float64</span>)</span></span> &#123;</span><br><span class="line">	v.X *= f;</span><br><span class="line">	v.Y *= f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// v := Vertex&#123;3, 4&#125;</span></span><br><span class="line">	<span class="hljs-comment">// v.Scale(2)</span></span><br><span class="line">	<span class="hljs-comment">// ScaleFunction(&amp;v, 10)</span></span><br><span class="line">	<span class="hljs-comment">// p := &amp;Vertex&#123;4, 3&#125;</span></span><br><span class="line">	<span class="hljs-comment">// p.Scale(3)</span></span><br><span class="line">	<span class="hljs-comment">// ScaleFunction(p, 8)</span></span><br><span class="line">	<span class="hljs-comment">// fmt.Println(v, p)</span></span><br><span class="line">	v := Vertex&#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;</span><br><span class="line">	v.Scale(<span class="hljs-number">10</span>);</span><br><span class="line">	fmt.Println(<span class="hljs-string">"1:"</span>,v);</span><br><span class="line">	ScaleFunction(&amp;v, <span class="hljs-number">2</span>);</span><br><span class="line">	fmt.Println(<span class="hljs-string">"2:"</span>, v);</span><br><span class="line">	<span class="hljs-comment">// p := &amp;v;</span></span><br><span class="line">	p := &amp;Vertex&#123;<span class="hljs-number">4</span>, <span class="hljs-number">3</span>&#125;;</span><br><span class="line">	p.Scale(<span class="hljs-number">2</span>);</span><br><span class="line">	fmt.Println(<span class="hljs-string">"3:"</span>, p);</span><br><span class="line">	ScaleFunction(p, <span class="hljs-number">10</span>);</span><br><span class="line">	fmt.Println(<span class="hljs-string">"4:"</span>, p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="方法与指针重定向（续）"><a href="#方法与指针重定向（续）" class="headerlink" title="方法与指针重定向（续）"></a>方法与指针重定向（续）</h3><p>同样的事情也发生在相反的方向。<br>接受一个值作为参数的函数必须接受一个指定类型的值：</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> v Vertex</span><br><span class="line">fmt.Println(AbsFunc(v))  <span class="hljs-comment">// OK</span></span><br><span class="line">fmt.Println(AbsFunc(&amp;v)) <span class="hljs-comment">// 编译错误！</span></span><br></pre></td></tr></table></figure>
<p>而以值为接收者的方法被调用时，接收者既能为值又能为指针：</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> v Vertex</span><br><span class="line">fmt.Println(v.Abs()) <span class="hljs-comment">// OK</span></span><br><span class="line">p := &amp;v</span><br><span class="line">fmt.Println(p.Abs()) <span class="hljs-comment">// OK</span></span><br></pre></td></tr></table></figure>
<p>这种情况下，方法调用 p.Abs() 会被解释为 (*p).Abs()。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v Vertex)</span> <span class="hljs-title">Abs</span><span class="hljs-params">()</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">AbsFunc</span><span class="hljs-params">(v Vertex)</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	v := Vertex&#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;</span><br><span class="line">	fmt.Println(v.Abs());</span><br><span class="line">	fmt.Println(AbsFunc(v));</span><br><span class="line">	p := &amp;Vertex&#123;<span class="hljs-number">4</span>, <span class="hljs-number">3</span>&#125;;</span><br><span class="line">	fmt.Println(p.Abs());</span><br><span class="line">	fmt.Println(AbsFunc(*p));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="选择值或指针作为接收者"><a href="#选择值或指针作为接收者" class="headerlink" title="选择值或指针作为接收者"></a>选择值或指针作为接收者</h3><p>使用指针接收者的原因有二：<br>首先，方法能够<strong>修改其接收者指向的值</strong>。<br>其次，这样可以<strong>避免在每次调用方法时复制该值</strong>。若值的类型为大型结构体时，这样做会更加高效。<br>在本例中，<code>Scale</code> 和 <code>Abs</code> 接收者的类型为 <code>*Vertex</code>，即便 Abs 并不需要修改其接收者。<br>通常来说，所有给定类型的方法都应该有值或<strong>指针接收者</strong>，但并不应该二者混用。（我们会在接下来几页中明白为什么。）</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// define method</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *Vertex)</span><span class="hljs-title">Scale</span><span class="hljs-params">(f <span class="hljs-keyword">float64</span>)</span></span> &#123;</span><br><span class="line">	v.X *= f;</span><br><span class="line">	v.Y *= f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *Vertex)</span><span class="hljs-title">Abs</span><span class="hljs-params">()</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// define function</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ScaleFunc</span><span class="hljs-params">(v *Vertex, f <span class="hljs-keyword">float64</span>)</span></span>&#123;</span><br><span class="line">	v.X *= f;</span><br><span class="line">	v.Y *= f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">AbsFunc</span><span class="hljs-params">(v *Vertex)</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	v :=Vertex&#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;</span><br><span class="line">	v.Scale(<span class="hljs-number">2</span>); </span><br><span class="line">	<span class="hljs-comment">// (&amp;v).Scale(2); equal</span></span><br><span class="line">	fmt.Println(v);</span><br><span class="line">	<span class="hljs-comment">// ScaleFunc(v, 20); cannot use v(type Vertex) as type *Vertex</span></span><br><span class="line">	ScaleFunc(&amp;v, <span class="hljs-number">20</span>);</span><br><span class="line">	fmt.Println(v);</span><br><span class="line"></span><br><span class="line">	v2 := &amp;Vertex&#123;<span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;</span><br><span class="line">	<span class="hljs-comment">// fmt.Printf("Before scaling: %v, Abs: %v\n", v2, v2.Abs());</span></span><br><span class="line">	<span class="hljs-comment">// fmt.Printf("Before scaling: %p, Abs: %v\n", v2, v2.Abs());</span></span><br><span class="line">	fmt.Printf(<span class="hljs-string">"Before scaling: %+v, Abs: %v\n"</span>, v2, v2.Abs());</span><br><span class="line">	v2.Scale(<span class="hljs-number">5</span>);</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"After Scaling: %+v, Abs: %v\n"</span>, v2, v2.Abs());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><p><strong>接口类型</strong> 是由一组方法签名定义的集合<br>接口类型的值可以保存任何实现了这些方法的值。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> MyFloat <span class="hljs-keyword">float64</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f MyFloat)</span> <span class="hljs-title">Abs</span><span class="hljs-params">()</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> f &lt; <span class="hljs-number">0</span> &#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> <span class="hljs-keyword">float64</span>(-f);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-keyword">float64</span>(f);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-keyword">type</span> Vertex <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *Vertex)</span> <span class="hljs-title">Abs</span><span class="hljs-params">()</span> <span class="hljs-title">float64</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y);</span><br><span class="line">&#125; </span><br><span class="line"><span class="hljs-comment">// define interface</span></span><br><span class="line"><span class="hljs-keyword">type</span> Abser <span class="hljs-keyword">interface</span> &#123;</span><br><span class="line">	Abs() <span class="hljs-keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// initlize</span></span><br><span class="line">	<span class="hljs-keyword">var</span> a Abser;</span><br><span class="line">	f := MyFloat(-math.Sqrt2);</span><br><span class="line">	v := Vertex&#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;</span><br><span class="line">	a = f; <span class="hljs-comment">// a MyFloat implements Abser</span></span><br><span class="line">	a = &amp;v; <span class="hljs-comment">// a *Vertex implements Abser</span></span><br><span class="line">	<span class="hljs-comment">// 下面一行，v是一个Vertex(而不是 *Vertex)，所以没有实现Abser</span></span><br><span class="line">	a = v;</span><br><span class="line">	fmt.Println(a.Abs());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="接口与隐式实现"><a href="#接口与隐式实现" class="headerlink" title="接口与隐式实现"></a>接口与隐式实现</h3><p>类型通过<strong>实现</strong>一个<strong>接口的所有方法</strong> 来实现该接口。既然无需专门显示声明，也就没有“implement”关键字。<br>隐式接口从接口的实现中解耦了定义，这样接口的实现可以出现在任何包中，无需提前准备。<br>因此，也就无需再每一个实现上增加新的接口名称，这样同时也鼓励了明确的接口定义。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> I <span class="hljs-keyword">interface</span> &#123;</span><br><span class="line">	M();</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-keyword">type</span> T <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	S <span class="hljs-keyword">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// This method means type T implements the inteface I,</span></span><br><span class="line"><span class="hljs-comment">// but we don't need to explicitly declare that it does so.</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t T)</span> <span class="hljs-title">M</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(t.S);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> i I = T&#123;<span class="hljs-string">"hellosdsfs"</span>&#125;;</span><br><span class="line">	i.M();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="接口值"><a href="#接口值" class="headerlink" title="接口值"></a>接口值</h3><p>在内部，接口值可以看做包含<strong>值和具体类型</strong>的元组： <code>(value, type)</code><br>接口值保存了一个具体底层类型的具体值。<br>接口值调用方法时会执行其底层类型的同名方法。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-comment">// 1.声明接口</span></span><br><span class="line"><span class="hljs-keyword">type</span> I <span class="hljs-keyword">interface</span> &#123;</span><br><span class="line">	M();</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// 2.声明一个结构体T</span></span><br><span class="line"><span class="hljs-keyword">type</span> T <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	S <span class="hljs-keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// 3.结构体T声明结构体的方法，实现接口的方法，隐式实现</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *T)</span> <span class="hljs-title">M</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(t.S);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-keyword">type</span> F <span class="hljs-keyword">float64</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f F)</span> <span class="hljs-title">M</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(f);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> i I;</span><br><span class="line">	i = &amp;T&#123;<span class="hljs-string">"Hello"</span>&#125;;</span><br><span class="line">	describe(i);</span><br><span class="line">	i.M();</span><br><span class="line">   <span class="hljs-comment">// 接口 有具体类型的类的去实现，方法也相应的类的方法去实现。</span></span><br><span class="line">	i = F(math.Pi);</span><br><span class="line">	describe(i);</span><br><span class="line">	i.M();</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">describe</span><span class="hljs-params">(i I)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"(%v, %T)\n"</span>, i, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="底层值为-nil-的接口值"><a href="#底层值为-nil-的接口值" class="headerlink" title="底层值为 nil 的接口值"></a>底层值为 nil 的接口值</h3><p>即便接口内的具体值为 nil，方法仍然会被 nil 接收者调用。<br>在一些语言中，这会触发一个空指针异常，但在 Go 中通常会写一些方法来优雅地处理它（如本例中的 M 方法）。<br><em>注意：</em> 保存了 nil 具体值的接口其自身并不为 nil。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-comment">// 1.声明一个接口I</span></span><br><span class="line"><span class="hljs-keyword">type</span> I <span class="hljs-keyword">interface</span> &#123;</span><br><span class="line">	M();</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// 2.声明具体类型T 结构体</span></span><br><span class="line"><span class="hljs-keyword">type</span> T <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	S <span class="hljs-keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// 3.具体类型结构体T(reciever) 实现接口的方法(隐式实现)</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *T)</span> <span class="hljs-title">M</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> t == <span class="hljs-literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="hljs-string">"&lt;nil&gt;"</span>);</span><br><span class="line">		<span class="hljs-keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(t.S);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> i I;</span><br><span class="line">	<span class="hljs-keyword">var</span> t *T;</span><br><span class="line">	i = t;</span><br><span class="line">	describe(i);</span><br><span class="line">	i.M();</span><br><span class="line">	i = &amp;T&#123;<span class="hljs-string">"Hellowqww"</span>&#125;;</span><br><span class="line">	describe(i);</span><br><span class="line">	i.M();</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">describe</span><span class="hljs-params">(i I)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"(%v %T)\n"</span>, i, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="nil-接口值"><a href="#nil-接口值" class="headerlink" title="nil 接口值"></a>nil 接口值</h3><p>nil 接口值既不保存值也不保存具体类型。<br>为 nil 接口调用方法会产生运行时错误，因为接口的元组内并未包含能够指明该调用哪个 具体 方法的类型。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> I <span class="hljs-keyword">interface</span> &#123;</span><br><span class="line">	M();</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> i I;</span><br><span class="line">	describe(i);</span><br><span class="line">	i.M();</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">describe</span><span class="hljs-params">(i I)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"(%v %T)\n"</span>,i, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="空接口"><a href="#空接口" class="headerlink" title="空接口"></a>空接口</h3><p>指定了零个方法的接口值被称为 <em>空接口：</em>  <code>interface{}</code><br>空接口可保存任何类型的值。（因为每个类型都至少实现了零个方法。）<br>空接口被用来处理未知类型的值。例如，<code>fmt.Print</code> 可接受类型为 <code>interface{}</code> 的任意数量的参数。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">var</span> i <span class="hljs-keyword">interface</span>&#123;&#125;;</span><br><span class="line">	describe(i);</span><br><span class="line">	i = <span class="hljs-number">42</span>;</span><br><span class="line">	describe(i);</span><br><span class="line">	i = <span class="hljs-string">"hello"</span>;</span><br><span class="line">	describe(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">describe</span><span class="hljs-params">(i <span class="hljs-keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"(%v %T)\n"</span>, i, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="类型断言"><a href="#类型断言" class="headerlink" title="类型断言"></a>类型断言</h3><p><strong>类型断言</strong> 提供了访问接口值底层具体值的方式。<br><code>t := i.(T)</code><br>该语句断言接口值 i 保存了具体类型 T，并将其底层类型为 T 的值赋予变量 t。<br>若 i 并未保存 T 类型的值，该语句就会触发一个panic。<br>为了 判断 一个接口值是否保存了一个特定的类型，类型断言可返回两个值：其底层值以及一个报告断言是否成功的布尔值。<br><code>t, ok := i.(T)</code><br>若 i 保存了一个 T，那么 t 将会是其底层值，而 ok 为 true。<br>否则，ok 将为 false 而 t 将为 T 类型的零值，程序并不会产生恐慌。<br>请注意这种语法和读取一个映射时的相同之处。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// 声明一个接口， </span></span><br><span class="line">	<span class="hljs-keyword">var</span> i <span class="hljs-keyword">interface</span>&#123;&#125; = <span class="hljs-string">"hello"</span>;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"(%v %T)\n"</span>,i, i);</span><br><span class="line">	s := i.(<span class="hljs-keyword">string</span>);</span><br><span class="line">	fmt.Println(s);</span><br><span class="line">	s, ok := i.(<span class="hljs-keyword">string</span>);</span><br><span class="line">	fmt.Println(s, ok);</span><br><span class="line">	f, ok := i.(<span class="hljs-keyword">float64</span>);</span><br><span class="line">	fmt.Println(f, ok);</span><br><span class="line">	f = i.(<span class="hljs-keyword">float64</span>);</span><br><span class="line">	fmt.Println(f);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="类型选择"><a href="#类型选择" class="headerlink" title="类型选择"></a>类型选择</h3><p>类型选择 是一种按顺序从几个类型断言中选择分支的结构。<br>类型选择与一般的 switch 语句相似，不过类型选择中的 case 为类型（而非值）， 它们针对给定接口值所存储的值的类型进行比较。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">switch</span> v := i.(<span class="hljs-keyword">type</span>) &#123;</span><br><span class="line"><span class="hljs-keyword">case</span> T:</span><br><span class="line">    <span class="hljs-comment">// v 的类型为 T</span></span><br><span class="line"><span class="hljs-keyword">case</span> S:</span><br><span class="line">    <span class="hljs-comment">// v 的类型为 S</span></span><br><span class="line"><span class="hljs-keyword">default</span>:</span><br><span class="line">    <span class="hljs-comment">// 没有匹配，v 与 i 的类型相同</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>类型选择中的声明与类型断言 <code>i.(T)</code> 的语法相同，只是具体类型 T 被替换成了关键字 type。<br>此选择语句判断接口值 i 保存的值类型是 T 还是 S。在 T 或 S 的情况下，变量 v 会分别按 T 或 S 类型保存 i 拥有的值。在默认（即没有匹配）的情况下，变量 v 与 i 的接口类型和值相同。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">do</span> <span class="hljs-params">(i <span class="hljs-keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">switch</span> v := i.(<span class="hljs-keyword">type</span>) &#123;</span><br><span class="line">		<span class="hljs-keyword">case</span> <span class="hljs-keyword">int</span>: </span><br><span class="line">			fmt.Printf(<span class="hljs-string">"Twice %v is %v\n"</span>, v, v*<span class="hljs-number">2</span>);</span><br><span class="line">		<span class="hljs-keyword">case</span> <span class="hljs-keyword">string</span>:</span><br><span class="line">			fmt.Printf(<span class="hljs-string">"%q is %v bytes long\n"</span>, v, <span class="hljs-built_in">len</span>(v));</span><br><span class="line">		<span class="hljs-keyword">default</span>:</span><br><span class="line">			fmt.Printf(<span class="hljs-string">"I don't know about type %T!\n"</span>, v);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	do(<span class="hljs-number">11</span>);</span><br><span class="line">	do(<span class="hljs-string">"hell9"</span>);</span><br><span class="line">	do(<span class="hljs-literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Stringer"><a href="#Stringer" class="headerlink" title="Stringer"></a>Stringer</h3><p>fmt 包中定义的 <strong>Stringer</strong> 是最普遍的接口之一。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">type</span> Stringer <span class="hljs-keyword">interface</span> &#123;</span><br><span class="line">    String() <span class="hljs-keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Stringer 是一个可以用字符串描述自己的类型。fmt 包（还有很多包）都通过此接口来打印值。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-comment">// type Stringer interface &#123;</span></span><br><span class="line"><span class="hljs-comment">// 	String() string;</span></span><br><span class="line"><span class="hljs-comment">// &#125;</span></span><br><span class="line"><span class="hljs-keyword">type</span> Person <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="hljs-keyword">string</span></span><br><span class="line">	Age <span class="hljs-keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(p Person)</span> <span class="hljs-title">String</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"%v (%v years)\n"</span>, p.Name, p.Age);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	a := Person&#123;<span class="hljs-string">"Arthur Dent"</span>, <span class="hljs-number">43</span>&#125;;</span><br><span class="line">	z := Person&#123;<span class="hljs-string">"Zaphod Beelebrox"</span>, <span class="hljs-number">9001</span>&#125;;</span><br><span class="line">	fmt.Println(a, z);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="练习：Stringer"><a href="#练习：Stringer" class="headerlink" title="练习：Stringer"></a>练习：Stringer</h3><p>通过让 <code>IPAddr</code> 类型实现 <code>fmt.Stringer</code> 来打印点号分隔的地址。<br>例如，<code>IPAddr{1, 2, 3, 4}</code> 应当打印为 <code>&quot;1.2.3.4&quot;</code>。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">type</span> IPAddr [<span class="hljs-number">4</span>]<span class="hljs-keyword">byte</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Add a "String() string" method to IPAddr.</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ipAddr IPAddr)</span> <span class="hljs-title">String</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> &#123;</span><br><span class="line">	</span><br><span class="line">	<span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"%v.%v.%v.%v\n"</span>, ipAddr[<span class="hljs-number">0</span>],ipAddr[<span class="hljs-number">1</span>],ipAddr[<span class="hljs-number">2</span>],ipAddr[<span class="hljs-number">3</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	hosts := <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]IPAddr&#123;</span><br><span class="line">		<span class="hljs-string">"loopback"</span>:  &#123;<span class="hljs-number">127</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;,</span><br><span class="line">		<span class="hljs-string">"googleDNS"</span>: &#123;<span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> name, ip := <span class="hljs-keyword">range</span> hosts &#123;</span><br><span class="line">		fmt.Printf(<span class="hljs-string">"%v: %v\n"</span>, name, ip)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h3><p>Go 程序使用 <code>error</code> 值来表示错误状态。<br>与 <code>fmt.Stringer</code> 类似，<code>error</code> 类型是一个内建接口：</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">type</span> error <span class="hljs-keyword">interface</span> &#123;</span><br><span class="line">    Error() <span class="hljs-keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>（与 fmt.Stringer 类似，fmt 包在打印值时也会满足 error。）<br>通常函数会返回一个 error 值，调用的它的代码应当判断这个错误是否等于 nil 来进行错误处理。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">i, err := strconv.Atoi(<span class="hljs-string">"42"</span>)</span><br><span class="line"><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;</span><br><span class="line">    fmt.Printf(<span class="hljs-string">"couldn't convert number: %v\n"</span>, err)</span><br><span class="line">    <span class="hljs-keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="hljs-string">"Converted integer:"</span>, i)</span><br></pre></td></tr></table></figure>
<p>error 为 nil 时表示成功；非 nil 的 error 表示失败。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"time"</span></span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">type</span> MyError <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	When time.Time</span><br><span class="line">	What <span class="hljs-keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(e *MyError)</span> <span class="hljs-title">Error</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"at %v, %s"</span>, e.When, e.What);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> <span class="hljs-title">error</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> &amp;MyError&#123;</span><br><span class="line">		time.Now(),</span><br><span class="line">		<span class="hljs-string">"it didn't work"</span>,</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> err := run(); err != <span class="hljs-literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="练习：错误"><a href="#练习：错误" class="headerlink" title="练习：错误"></a>练习：错误</h3><p>从之前的练习中复制 Sqrt 函数，修改它使其返回 error 值。<br>Sqrt 接受到一个负数时，应当返回一个非 nil 的错误值。复数同样也不被支持。<br>创建一个新的类型<br><code>type ErrNegativeSqrt float64</code><br>并为其实现<br><code>func (e ErrNegativeSqrt) Error() string</code><br>方法使其拥有 error 值，通过 ErrNegativeSqrt(-2).Error() 调用该方法应返回 <code>&quot;cannot Sqrt negative number: -2&quot;</code>。<br><em>注意：</em> 在 Error 方法内调用 fmt.Sprint(e) 会让程序陷入死循环。可以通过先转换 e 来避免这个问题：fmt.Sprint(float64(e))。这是为什么呢？<br>修改 Sqrt 函数，使其接受一个负数时，返回 <code>ErrNegativeSqrt</code> 值。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Sqrt</span><span class="hljs-params">(x <span class="hljs-keyword">float64</span>)</span> <span class="hljs-params">(<span class="hljs-keyword">float64</span>, error)</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, <span class="hljs-literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(Sqrt(<span class="hljs-number">2</span>))</span><br><span class="line">	fmt.Println(Sqrt(<span class="hljs-number">-2</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Reader"><a href="#Reader" class="headerlink" title="Reader"></a>Reader</h3><p><code>io</code> 包指定了 <code>io.Reader</code> 接口，它表示从数据流的末尾进行读取。<br>Go 标准库包含了该接口的许多实现，包括文件、网络连接、压缩和加密等等。<br><code>io.Reader</code> 接口有一个 <code>Read</code> 方法：<br><code>func (T) Read(b []byte) (n int, err error)</code><br>Read 用数据填充给定的字节切片并返回填充的字节数和错误值。在遇到数据流的结尾时，它会返回一个 io.EOF 错误。<br>示例代码创建了一个 <code>strings.Reader</code> 并以每次 8 字节的速度读取它的输出。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"io"</span></span><br><span class="line">	<span class="hljs-string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	r := strings.NewReader(<span class="hljs-string">"Hello, Reader!"</span>)</span><br><span class="line"></span><br><span class="line">	b := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">byte</span>, <span class="hljs-number">8</span>)</span><br><span class="line">	<span class="hljs-keyword">for</span> &#123;</span><br><span class="line">		n, err := r.Read(b)</span><br><span class="line">		fmt.Printf(<span class="hljs-string">"n = %v err = %v b = %v\n"</span>, n, err, b)</span><br><span class="line">		fmt.Printf(<span class="hljs-string">"b[:n] = %q\n"</span>, b[:n])</span><br><span class="line">		<span class="hljs-keyword">if</span> err == io.EOF &#123;</span><br><span class="line">			<span class="hljs-keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="练习：Reader"><a href="#练习：Reader" class="headerlink" title="练习：Reader"></a>练习：Reader</h3><p>实现一个 Reader 类型，它产生一个 <code>ASCII</code>字符 <code>&#39;A&#39;</code> 的无限流。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"golang.org/x/tour/reader"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">type</span> MyReader <span class="hljs-keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Add a Read([]byte) (int, error) method to MyReader.</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	reader.Validate(MyReader&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="练习：rot13Reader"><a href="#练习：rot13Reader" class="headerlink" title="练习：rot13Reader"></a>练习：rot13Reader</h3><p>有种常见的模式是一个 <code>io.Reader</code> 包装另一个 <code>io.Reader</code>，然后通过某种方式修改其数据流。</p>
<p>例如，<code>gzip.NewReader</code> 函数接受一个 <code>io.Reader</code>（已压缩的数据流）并返回一个同样实现了 <code>io.Reader</code> 的 <code>*gzip.Reader</code>（解压后的数据流）。</p>
<p>编写一个实现了 <code>io.Reader</code> 并从另一个 <code>io.Reader</code> 中读取数据的 <code>rot13Reader</code>，通过应用 <code>rot13</code> 代换密码对数据流进行修改。</p>
<p><code>rot13Reader</code> 类型已经提供。实现 <code>Read</code>方法以满足 <code>io.Reader</code>。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"io"</span></span><br><span class="line">	<span class="hljs-string">"os"</span></span><br><span class="line">	<span class="hljs-string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">type</span> rot13Reader <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	r io.Reader</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	s := strings.NewReader(<span class="hljs-string">"Lbh penpxrq gur pbqr!"</span>)</span><br><span class="line">	r := rot13Reader&#123;s&#125;</span><br><span class="line">	io.Copy(os.Stdout, &amp;r)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h3><p><code>image</code> 包定义了 <code>Image</code> 接口：</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> image</span><br><span class="line"><span class="hljs-keyword">type</span> Image <span class="hljs-keyword">interface</span> &#123;</span><br><span class="line">    ColorModel() color.Model</span><br><span class="line">    Bounds() Rectangle</span><br><span class="line">    At(x, y <span class="hljs-keyword">int</span>) color.Color</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>注意：</em> <code>Bounds</code> 方法的返回值 <code>Rectangle</code> 实际上是一个 <code>image.Rectangle</code>，它在 <code>image</code> 包中声明。<br><code>color.Color</code> 和 <code>color.Model</code> 类型也是接口，但是通常因为直接使用预定义的实现 <code>image.RGBA</code> 和 <code>image.RGBAModel</code> 而被忽视了。这些接口和类型由 <code>image/color</code> 包定义。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"image"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	m := image.NewRGBA(image.Rect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>))</span><br><span class="line">	fmt.Println(m.Bounds())</span><br><span class="line">	fmt.Println(m.At(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>).RGBA())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="练习：图像"><a href="#练习：图像" class="headerlink" title="练习：图像"></a>练习：图像</h3><p>还记得之前编写的图片生成器吗？我们再来编写另外一个，不过这次它将会返回一个 <code>image.Image</code> 的实现而非一个数据切片。</p>
<p>定义你自己的 Image 类型，实现必要的方法并调用 <code>pic.ShowImage</code>。</p>
<p>Bounds 应当返回一个 <code>image.Rectangle</code> ，例如 <code>image.Rect(0, 0, w, h)</code>。</p>
<p><code>ColorModel</code> 应当返回 <code>color.RGBAModel</code>。</p>
<p>At 应当返回一个颜色。上一个图片生成器的值 v 对应于此次的 <code>color.RGBA{v, v, 255, 255}</code>。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"golang.org/x/tour/pic"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">type</span> Image <span class="hljs-keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	m := Image&#123;&#125;</span><br><span class="line">	pic.ShowImage(m)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h2><h3 id="goroutine"><a href="#goroutine" class="headerlink" title="goroutine"></a>goroutine</h3><p>Go 程（goroutine）是由 Go 运行时管理的轻量级线程。<br><code>go f(x, y, z)</code>会启动一个新的 goroutine并执行<code>f(x, y, z)</code>。<br>f, x, y 和 z 的<strong>求值</strong>发生在当前的 Go 程中，而<strong>f的执行</strong>发生在新的 Go 程中。<br>Go 程在相同的地址空间中运行，因此在访问共享的内存时必须进行同步。sync 包提供了这种能力，不过在 Go 中并不经常用到，因为还有其它的办法（见下一页）。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main </span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"time"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">say</span><span class="hljs-params">(s <span class="hljs-keyword">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">for</span> i:= <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">5</span>; i++ &#123;</span><br><span class="line">		time.Sleep(<span class="hljs-number">100</span>*time.Millisecond);</span><br><span class="line">		fmt.Println(s);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">go</span> say(<span class="hljs-string">"hellod"</span>);</span><br><span class="line">	<span class="hljs-comment">// fmt.Printf("address: %p", say);</span></span><br><span class="line">	say(<span class="hljs-string">"easonchen"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="信道-Channels"><a href="#信道-Channels" class="headerlink" title="信道(Channels)"></a>信道(Channels)</h3><p>信道是带有类型的管道，你可以通过它用信道操作符 <code>&lt;-</code> 来发送或者接收值。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ch &lt;- v    <span class="hljs-comment">// 将 v 发送至信道 ch。</span></span><br><span class="line">v := &lt;-ch  <span class="hljs-comment">// 从 ch 接收值并赋予 v。</span></span><br></pre></td></tr></table></figure>
<p>（“箭头”就是数据流的方向。）<br>和映射与切片一样，信道在使用前必须创建：<code>ch := make(chan int)</code><br>默认情况下，发送和接收操作在另一端准备好之前都会阻塞。这使得 Go 程可以在没有显式的锁或竞态变量的情况下进行同步。<br>以下示例对切片中的数进行求和，将任务分配给两个 Go 程。一旦两个 Go 程完成了它们的计算，它就能算出最终的结果。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sum</span><span class="hljs-params">(s []<span class="hljs-keyword">int</span>, c <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)</span></span> &#123;</span><br><span class="line">	sum := <span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> s &#123;</span><br><span class="line">		sum += v;</span><br><span class="line">	&#125;</span><br><span class="line">	c &lt;- sum;<span class="hljs-comment">// 将和送入 c</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	s := []<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>&#125;;</span><br><span class="line">	c := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>);</span><br><span class="line">	<span class="hljs-keyword">go</span> sum(s[:<span class="hljs-built_in">len</span>(s)/<span class="hljs-number">2</span>], c);</span><br><span class="line">	<span class="hljs-keyword">go</span> sum(s[<span class="hljs-built_in">len</span>(s)/<span class="hljs-number">2</span>:], c);</span><br><span class="line">	x, y := &lt;-c, &lt;-c; <span class="hljs-comment">// 接受者</span></span><br><span class="line">	fmt.Println(x, y, x+y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="带缓冲的信道"><a href="#带缓冲的信道" class="headerlink" title="带缓冲的信道"></a>带缓冲的信道</h3><p>信道可以是 带缓冲的。将缓冲长度作为第二个参数提供给 make 来初始化一个带缓冲的信道：<br><code>ch := make(chan int, 100)</code><br>仅当信道的缓冲区填满后，向其发送数据时才会阻塞。当缓冲区为空时，接受方会阻塞。<br>修改示例填满缓冲区，然后看看会发生什么。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>, <span class="hljs-number">4</span>);</span><br><span class="line">	ch &lt;- <span class="hljs-number">1</span>;</span><br><span class="line">	ch &lt;- <span class="hljs-number">2</span>;</span><br><span class="line">	ch &lt;- <span class="hljs-number">3</span>;</span><br><span class="line">	ch &lt;- <span class="hljs-number">4</span>;</span><br><span class="line">	fmt.Println(&lt;-ch);</span><br><span class="line">	fmt.Println(&lt;-ch);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="range-和-close"><a href="#range-和-close" class="headerlink" title="range 和 close"></a>range 和 close</h3><p>发送者可通过 <code>close</code> 关闭一个信道来表示没有需要发送的值了。接收者可以通过为接收表达式分配第二个参数来测试信道是否被关闭：若没有值可以接收且信道已被关闭，那么在执行完<br><code>v, ok := &lt;-ch</code><br>之后 ok 会被设置为 false。<br>循环 <code>for i := range c</code> 会不断从信道接收值，直到它被关闭。<br><em>Note：</em> 只有发送者才能关闭信道，而接收者不能。向一个已经关闭的信道发送数据会引发程序恐慌（panic）。<br><em>Another Note：</em> 信道与文件不同，通常情况下无需关闭它们。只有在必须告诉接收者不再有值需要发送的时候才有必要关闭，例如终止一个 range 循环。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fibonacci</span><span class="hljs-params">(n <span class="hljs-keyword">int</span>, c <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)</span></span> &#123;</span><br><span class="line">	x, y := <span class="hljs-number">0</span>, <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> i:=<span class="hljs-number">0</span>; i&lt;n; i++ &#123;</span><br><span class="line">		c &lt;- x;</span><br><span class="line">		x, y = y, x+y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">close</span>(c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	c := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>, <span class="hljs-number">10</span>);</span><br><span class="line">	<span class="hljs-keyword">go</span> fibonacci(<span class="hljs-built_in">cap</span>(c), c);</span><br><span class="line">	<span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> c &#123;</span><br><span class="line">		fmt.Println(i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="select-语句"><a href="#select-语句" class="headerlink" title="select 语句"></a>select 语句</h3><p>select 语句使一个 Go 程可以等待多个通信操作。<br>select 会阻塞到某个分支可以继续执行为止，这时就会执行该分支。当多个分支都准备好时会随机选择一个执行。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fibonacci</span> <span class="hljs-params">(c, quit <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)</span></span> &#123;</span><br><span class="line">	x, y := <span class="hljs-number">0</span>, <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> &#123;</span><br><span class="line">		<span class="hljs-keyword">select</span> &#123;</span><br><span class="line">		<span class="hljs-keyword">case</span> c &lt;- x:</span><br><span class="line">			x, y = y, x+y;</span><br><span class="line">		<span class="hljs-keyword">case</span> &lt;- quit:</span><br><span class="line">			fmt.Println(<span class="hljs-string">"quit"</span>);</span><br><span class="line">			<span class="hljs-keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	c := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>);</span><br><span class="line">	quit := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>);</span><br><span class="line">	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;</span><br><span class="line">			fmt.Println(&lt;-c);</span><br><span class="line">		&#125;</span><br><span class="line">		quit &lt;- <span class="hljs-number">0</span>;</span><br><span class="line">	&#125;();</span><br><span class="line">	fibonacci(c, quit);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="默认选择"><a href="#默认选择" class="headerlink" title="默认选择"></a>默认选择</h3><p>当 select 中的其它分支都没有准备好时，default 分支就会执行。<br>为了在尝试发送或者接收时不发生阻塞，可使用 default 分支：</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">select</span> &#123;</span><br><span class="line"><span class="hljs-keyword">case</span> i := &lt;-c:</span><br><span class="line">    <span class="hljs-comment">// 使用 i</span></span><br><span class="line"><span class="hljs-keyword">default</span>:</span><br><span class="line">    <span class="hljs-comment">// 从 c 中接收会阻塞时执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"time"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	tick := time.Tick(<span class="hljs-number">100</span>*time.Millisecond);</span><br><span class="line">	boom := time.After(<span class="hljs-number">500</span>*time.Millisecond);</span><br><span class="line">	<span class="hljs-keyword">for</span> &#123;</span><br><span class="line">		<span class="hljs-keyword">select</span> &#123;</span><br><span class="line">		<span class="hljs-keyword">case</span> &lt;- tick:</span><br><span class="line">			fmt.Println(<span class="hljs-string">"tick"</span>);</span><br><span class="line">		<span class="hljs-keyword">case</span> &lt;- boom:</span><br><span class="line">			fmt.Println(<span class="hljs-string">"boom"</span>);</span><br><span class="line">			<span class="hljs-keyword">return</span>;</span><br><span class="line">		<span class="hljs-keyword">default</span>:</span><br><span class="line">			fmt.Println(<span class="hljs-string">"   ."</span>)</span><br><span class="line">			time.Sleep(<span class="hljs-number">50</span>*time.Millisecond);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="练习：等价二叉查找树"><a href="#练习：等价二叉查找树" class="headerlink" title="练习：等价二叉查找树"></a>练习：等价二叉查找树</h3><ol>
<li><p>实现 Walk 函数。</p>
</li>
<li><p>测试 Walk 函数。</p>
</li>
</ol>
<p>函数 tree.New(k) 用于构造一个随机结构的已排序二叉查找树，它保存了值 k, 2k, 3k, …, 10k。</p>
<p>创建一个新的信道 ch 并且对其进行步进：</p>
<p>go Walk(tree.New(1), ch)<br>然后从信道中读取并打印 10 个值。应当是数字 1, 2, 3, …, 10。</p>
<ol start="3">
<li><p>用 Walk 实现 Same 函数来检测 t1 和 t2 是否存储了相同的值。</p>
</li>
<li><p>测试 Same 函数。</p>
</li>
</ol>
<p>Same(tree.New(1), tree.New(1)) 应当返回 true，而 Same(tree.New(1), tree.New(2)) 应当返回 false。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"golang.org/x/tour/tree"</span></span><br><span class="line"><span class="hljs-comment">// Walk 步进 tree t 将所有的值从 tree 发送到 channel ch。</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Walk</span><span class="hljs-params">(t *tree.Tree, ch <span class="hljs-keyword">chan</span> <span class="hljs-keyword">int</span>)</span></span></span><br><span class="line"><span class="hljs-function">// <span class="hljs-title">Same</span> 检测树 <span class="hljs-title">t1</span> 和 <span class="hljs-title">t2</span> 是否含有相同的值。</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-title">func</span> <span class="hljs-title">Same</span><span class="hljs-params">(t1, t2 *tree.Tree)</span> <span class="hljs-title">bool</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-title">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="sync-Mutex"><a href="#sync-Mutex" class="headerlink" title="sync.Mutex"></a>sync.Mutex</h3><p>我们已经看到信道非常适合在各个 Go 程间进行通信。</p>
<p>但是如果我们并不需要通信呢？比如说，若我们只是想保证每次只有一个 Go 程能够访问一个共享的变量，从而避免冲突？</p>
<p>这里涉及的概念叫做<code>_互斥（mutual_exclusion）_</code> ，我们通常使用 <code>_互斥锁（Mutex）_</code> 这一数据结构来提供这种机制。</p>
<p>Go 标准库中提供了 <code>sync.Mutex</code> 互斥锁类型及其两个方法：</p>
<p><code>Lock</code><br><code>Unlock</code><br>我们可以通过在代码前调用 Lock 方法，在代码后调用 Unlock 方法来保证一段代码的互斥执行。参见 Inc 方法。</p>
<p>我们也可以用 defer 语句来保证互斥锁一定会被解锁。参见 Value 方法。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">	<span class="hljs-string">"sync"</span></span><br><span class="line">	<span class="hljs-string">"time"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-comment">// SafeCounter 的并发使用是安全的</span></span><br><span class="line"><span class="hljs-keyword">type</span> SafeCounter <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	v <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">int</span></span><br><span class="line">	mux sync.Mutex</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// Inc增加给定key的计数器的值</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *SafeCounter)</span> <span class="hljs-title">Inc</span><span class="hljs-params">(key <span class="hljs-keyword">string</span>)</span></span> &#123;</span><br><span class="line">	c.mux.Lock();</span><br><span class="line">	<span class="hljs-comment">// Lock之后同一时刻只有一个goroutine能访问c.v</span></span><br><span class="line">	c.v[key]++;</span><br><span class="line">	c.mux.Unlock();</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// Value返回给定key的计数器的当前值</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *SafeCounter)</span> <span class="hljs-title">Value</span><span class="hljs-params">(key <span class="hljs-keyword">string</span>)</span> <span class="hljs-title">int</span></span> &#123;</span><br><span class="line">	c.mux.Lock()</span><br><span class="line">	<span class="hljs-comment">// Lock之后同一时刻只有一个goroutine能访问c.v</span></span><br><span class="line">	<span class="hljs-keyword">defer</span> c.mux.Unlock();</span><br><span class="line">	<span class="hljs-keyword">return</span> c.v[key];</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	c := SafeCounter&#123;v: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">int</span>)&#125;;</span><br><span class="line">	<span class="hljs-keyword">for</span> i :=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">1000</span>; i++ &#123;</span><br><span class="line">		<span class="hljs-keyword">go</span> c.Inc(<span class="hljs-string">"Somekey"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	time.Sleep(time.Second);</span><br><span class="line">	fmt.Println(c.Value(<span class="hljs-string">"Somekey"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>###练习：Web 爬虫<br>在这个练习中，我们将会使用 Go 的并发特性来并行化一个 Web 爬虫。<br>修改 Crawl 函数来并行地抓取 URL，并且保证不重复。<br>提示：你可以用一个 map 来缓存已经获取的 URL，但是要注意 map 本身并不是并发安全的！</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">	<span class="hljs-string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">type</span> Fetcher <span class="hljs-keyword">interface</span> &#123;</span><br><span class="line">	<span class="hljs-comment">// Fetch 返回 URL 的 body 内容，并且将在这个页面上找到的 URL 放到一个 slice 中。</span></span><br><span class="line">	Fetch(url <span class="hljs-keyword">string</span>) (body <span class="hljs-keyword">string</span>, urls []<span class="hljs-keyword">string</span>, err error)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// Crawl 使用 fetcher 从某个 URL 开始递归的爬取页面，直到达到最大深度。</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Crawl</span><span class="hljs-params">(url <span class="hljs-keyword">string</span>, depth <span class="hljs-keyword">int</span>, fetcher Fetcher)</span></span> &#123;</span><br><span class="line">	<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> 并行的抓取 URL。</span></span><br><span class="line">	<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> 不重复抓取页面。</span></span><br><span class="line">        <span class="hljs-comment">// 下面并没有实现上面两种情况：</span></span><br><span class="line">	<span class="hljs-keyword">if</span> depth &lt;= <span class="hljs-number">0</span> &#123;</span><br><span class="line">		<span class="hljs-keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	body, urls, err := fetcher.Fetch(url)</span><br><span class="line">	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="hljs-keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="hljs-string">"found: %s %q\n"</span>, url, body)</span><br><span class="line">	<span class="hljs-keyword">for</span> _, u := <span class="hljs-keyword">range</span> urls &#123;</span><br><span class="line">		Crawl(u, depth<span class="hljs-number">-1</span>, fetcher)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;</span><br><span class="line">	Crawl(<span class="hljs-string">"https://golang.org/"</span>, <span class="hljs-number">4</span>, fetcher)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// fakeFetcher 是返回若干结果的 Fetcher。</span></span><br><span class="line"><span class="hljs-keyword">type</span> fakeFetcher <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]*fakeResult</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">type</span> fakeResult <span class="hljs-keyword">struct</span> &#123;</span><br><span class="line">	body <span class="hljs-keyword">string</span></span><br><span class="line">	urls []<span class="hljs-keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f fakeFetcher)</span> <span class="hljs-title">Fetch</span><span class="hljs-params">(url <span class="hljs-keyword">string</span>)</span> <span class="hljs-params">(<span class="hljs-keyword">string</span>, []<span class="hljs-keyword">string</span>, error)</span></span> &#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> res, ok := f[url]; ok &#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> res.body, res.urls, <span class="hljs-literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"not found: %s"</span>, url)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// fetcher 是填充后的 fakeFetcher。</span></span><br><span class="line"><span class="hljs-keyword">var</span> fetcher = fakeFetcher&#123;</span><br><span class="line">	<span class="hljs-string">"https://golang.org/"</span>: &amp;fakeResult&#123;</span><br><span class="line">		<span class="hljs-string">"The Go Programming Language"</span>,</span><br><span class="line">		[]<span class="hljs-keyword">string</span>&#123;</span><br><span class="line">			<span class="hljs-string">"https://golang.org/pkg/"</span>,</span><br><span class="line">			<span class="hljs-string">"https://golang.org/cmd/"</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="hljs-string">"https://golang.org/pkg/"</span>: &amp;fakeResult&#123;</span><br><span class="line">		<span class="hljs-string">"Packages"</span>,</span><br><span class="line">		[]<span class="hljs-keyword">string</span>&#123;</span><br><span class="line">			<span class="hljs-string">"https://golang.org/"</span>,</span><br><span class="line">			<span class="hljs-string">"https://golang.org/cmd/"</span>,</span><br><span class="line">			<span class="hljs-string">"https://golang.org/pkg/fmt/"</span>,</span><br><span class="line">			<span class="hljs-string">"https://golang.org/pkg/os/"</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="hljs-string">"https://golang.org/pkg/fmt/"</span>: &amp;fakeResult&#123;</span><br><span class="line">		<span class="hljs-string">"Package fmt"</span>,</span><br><span class="line">		[]<span class="hljs-keyword">string</span>&#123;</span><br><span class="line">			<span class="hljs-string">"https://golang.org/"</span>,</span><br><span class="line">			<span class="hljs-string">"https://golang.org/pkg/"</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="hljs-string">"https://golang.org/pkg/os/"</span>: &amp;fakeResult&#123;</span><br><span class="line">		<span class="hljs-string">"Package os"</span>,</span><br><span class="line">		[]<span class="hljs-keyword">string</span>&#123;</span><br><span class="line">			<span class="hljs-string">"https://golang.org/"</span>,</span><br><span class="line">			<span class="hljs-string">"https://golang.org/pkg/"</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/编程/">编程</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2018/09/28/Python入门/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">Python入门</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2018/09/27/restartAndConsist/">
                <span class="level-item">restartAndConsist</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>


</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="is-rounded" src="/images/avatar2.jpeg" alt="fallenk">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        fallenk
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        研究僧
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Hangzhou, ZJU</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Artikel
                    </p>
                    <p class="title has-text-weight-normal">
                        55
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Kategori
                    </p>
                    <p class="title has-text-weight-normal">
                        23
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tag
                    </p>
                    <p class="title has-text-weight-normal">
                        42
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/fallenk" target="_blank">
                IKUTI</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Github" href="https://github.com/fallenk">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Facebook" href="https://facebook.com/fallenk">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Twitter" href="https://twitter.com/fallenk">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Dribbble" href="https://dribbble.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Tautan
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/fallenk" target="_blank">
                    <span class="level-left">
                        <span class="level-item">PPOffice</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Kategori
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/AI/">
            <span class="level-start">
                <span class="level-item">AI</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Blcokchain/">
            <span class="level-start">
                <span class="level-item">Blcokchain</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/C/">
            <span class="level-start">
                <span class="level-item">C++</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Cryptography-Intro/">
            <span class="level-start">
                <span class="level-item">Cryptography Intro</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Docker容器/">
            <span class="level-start">
                <span class="level-item">Docker容器</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Federated-Learning/">
            <span class="level-start">
                <span class="level-item">Federated Learning</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Java/">
            <span class="level-start">
                <span class="level-item">Java</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Java学习/">
            <span class="level-start">
                <span class="level-item">Java学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/LeetCode/">
            <span class="level-start">
                <span class="level-item">LeetCode</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Python学习/">
            <span class="level-start">
                <span class="level-item">Python学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Swagger学习/">
            <span class="level-start">
                <span class="level-item">Swagger学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/TensorFlow/">
            <span class="level-start">
                <span class="level-item">TensorFlow</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Tensorflow/">
            <span class="level-start">
                <span class="level-item">Tensorflow</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/golang学习/">
            <span class="level-start">
                <span class="level-item">golang学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/iOS编程/">
            <span class="level-start">
                <span class="level-item">iOS编程</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/pytorch/">
            <span class="level-start">
                <span class="level-item">pytorch</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/yaml/">
            <span class="level-start">
                <span class="level-item">yaml</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/人工智能/">
            <span class="level-start">
                <span class="level-item">人工智能</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/博客建设/">
            <span class="level-start">
                <span class="level-item">博客建设</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/大数据学习/">
            <span class="level-start">
                <span class="level-item">大数据学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/工具学习/">
            <span class="level-start">
                <span class="level-item">工具学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/游戏开发/">
            <span class="level-start">
                <span class="level-item">游戏开发</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/论文阅读/">
            <span class="level-start">
                <span class="level-item">论文阅读</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">7</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Awan tag
        </h3>
        <a href="/tags/AI/" style="font-size: 10px;">AI</a> <a href="/tags/BigData/" style="font-size: 10px;">BigData</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/Cryptography/" style="font-size: 10px;">Cryptography</a> <a href="/tags/Federated-Learning/" style="font-size: 10px;">Federated Learning</a> <a href="/tags/Goa入门/" style="font-size: 10px;">Goa入门</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/LeetCode/" style="font-size: 12px;">LeetCode</a> <a href="/tags/Mac终端命令/" style="font-size: 10px;">Mac终端命令</a> <a href="/tags/Swagger/" style="font-size: 10px;">Swagger</a> <a href="/tags/coding/" style="font-size: 20px;">coding</a> <a href="/tags/encryption/" style="font-size: 10px;">encryption</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/golang/" style="font-size: 10px;">golang</a> <a href="/tags/hexo/" style="font-size: 12px;">hexo</a> <a href="/tags/important/" style="font-size: 10px;">important</a> <a href="/tags/intro/" style="font-size: 10px;">intro</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/paper/" style="font-size: 14px;">paper</a> <a href="/tags/paper-reading/" style="font-size: 10px;">paper reading</a> <a href="/tags/paperReading/" style="font-size: 12px;">paperReading</a> <a href="/tags/python转换/" style="font-size: 10px;">python转换</a> <a href="/tags/pytorch学习/" style="font-size: 12px;">pytorch学习</a> <a href="/tags/云端学习笔记/" style="font-size: 10px;">云端学习笔记</a> <a href="/tags/代码/" style="font-size: 12px;">代码</a> <a href="/tags/入门/" style="font-size: 16px;">入门</a> <a href="/tags/入门指引/" style="font-size: 10px;">入门指引</a> <a href="/tags/刷题/" style="font-size: 12px;">刷题</a> <a href="/tags/双指针/" style="font-size: 10px;">双指针</a> <a href="/tags/基础/" style="font-size: 12px;">基础</a> <a href="/tags/大数据，spark/" style="font-size: 10px;">大数据，spark</a> <a href="/tags/排序/" style="font-size: 10px;">排序</a> <a href="/tags/提升自我/" style="font-size: 10px;">提升自我</a> <a href="/tags/深度学习/" style="font-size: 10px;">深度学习</a> <a href="/tags/神经网络搜索/" style="font-size: 12px;">神经网络搜索</a> <a href="/tags/禅/" style="font-size: 10px;">禅</a> <a href="/tags/编程/" style="font-size: 18px;">编程</a> <a href="/tags/编程技巧，/" style="font-size: 10px;">编程技巧，</a> <a href="/tags/联合学习/" style="font-size: 14px;">联合学习</a> <a href="/tags/自我修炼/" style="font-size: 10px;">自我修炼</a> <a href="/tags/论文阅读/" style="font-size: 12px;">论文阅读</a> <a href="/tags/配置文件/" style="font-size: 10px;">配置文件</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Terbaru
        </h3>
        
        <article class="media">
            
            <a href="/2019/11/09/2两数相加/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="2两数相加">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-09T14:30:59.000Z">2019-11-09</time></div>
                    <a href="/2019/11/09/2两数相加/" class="title has-link-black-ter is-size-6 has-text-weight-normal">2两数相加</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/07/1两数之和/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="1两数之和">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-07T13:26:52.000Z">2019-11-07</time></div>
                    <a href="/2019/11/07/1两数之和/" class="title has-link-black-ter is-size-6 has-text-weight-normal">1两数之和</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/22/第一章Java程序设计概述/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="第一章Java程序设计概述">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-22T07:35:01.000Z">2019-10-22</time></div>
                    <a href="/2019/10/22/第一章Java程序设计概述/" class="title has-link-black-ter is-size-6 has-text-weight-normal">第一章Java程序设计概述</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Java学习/">Java学习</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/20/NICO/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="NICO">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-20T07:05:10.000Z">2019-10-20</time></div>
                    <a href="/2019/10/20/NICO/" class="title has-link-black-ter is-size-6 has-text-weight-normal">NICO</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/09/02/LEAF/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="LEAF">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-02T07:09:19.000Z">2019-09-02</time></div>
                    <a href="/2019/09/02/LEAF/" class="title has-link-black-ter is-size-6 has-text-weight-normal">LEAF</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Federated-Learning/">Federated Learning</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Arsip
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/11/">
                <span class="level-start">
                    <span class="level-item">November 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">June 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">May 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">January 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">December 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tag
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/AI/">
                        <span class="tag">AI</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/BigData/">
                        <span class="tag">BigData</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/C/">
                        <span class="tag">C++</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Cryptography/">
                        <span class="tag">Cryptography</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Federated-Learning/">
                        <span class="tag">Federated Learning</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Goa入门/">
                        <span class="tag">Goa入门</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LeetCode/">
                        <span class="tag">LeetCode</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Mac终端命令/">
                        <span class="tag">Mac终端命令</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Swagger/">
                        <span class="tag">Swagger</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/coding/">
                        <span class="tag">coding</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/encryption/">
                        <span class="tag">encryption</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/github/">
                        <span class="tag">github</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/golang/">
                        <span class="tag">golang</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/important/">
                        <span class="tag">important</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/intro/">
                        <span class="tag">intro</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/npm/">
                        <span class="tag">npm</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/paper/">
                        <span class="tag">paper</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/paper-reading/">
                        <span class="tag">paper reading</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/paperReading/">
                        <span class="tag">paperReading</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python转换/">
                        <span class="tag">python转换</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/pytorch学习/">
                        <span class="tag">pytorch学习</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/云端学习笔记/">
                        <span class="tag">云端学习笔记</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/代码/">
                        <span class="tag">代码</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/入门/">
                        <span class="tag">入门</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/入门指引/">
                        <span class="tag">入门指引</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/刷题/">
                        <span class="tag">刷题</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/双指针/">
                        <span class="tag">双指针</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/基础/">
                        <span class="tag">基础</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/大数据，spark/">
                        <span class="tag">大数据，spark</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/排序/">
                        <span class="tag">排序</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/提升自我/">
                        <span class="tag">提升自我</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/深度学习/">
                        <span class="tag">深度学习</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/神经网络搜索/">
                        <span class="tag">神经网络搜索</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/禅/">
                        <span class="tag">禅</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程/">
                        <span class="tag">编程</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程技巧，/">
                        <span class="tag">编程技巧，</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/联合学习/">
                        <span class="tag">联合学习</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/自我修炼/">
                        <span class="tag">自我修炼</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/论文阅读/">
                        <span class="tag">论文阅读</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/配置文件/">
                        <span class="tag">配置文件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Terbaru
        </h3>
        
        <article class="media">
            
            <a href="/2019/11/09/2两数相加/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="2两数相加">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-09T14:30:59.000Z">2019-11-09</time></div>
                    <a href="/2019/11/09/2两数相加/" class="title has-link-black-ter is-size-6 has-text-weight-normal">2两数相加</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/11/07/1两数之和/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="1两数之和">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-11-07T13:26:52.000Z">2019-11-07</time></div>
                    <a href="/2019/11/07/1两数之和/" class="title has-link-black-ter is-size-6 has-text-weight-normal">1两数之和</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/22/第一章Java程序设计概述/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="第一章Java程序设计概述">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-22T07:35:01.000Z">2019-10-22</time></div>
                    <a href="/2019/10/22/第一章Java程序设计概述/" class="title has-link-black-ter is-size-6 has-text-weight-normal">第一章Java程序设计概述</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Java学习/">Java学习</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/20/NICO/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="NICO">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-20T07:05:10.000Z">2019-10-20</time></div>
                    <a href="/2019/10/20/NICO/" class="title has-link-black-ter is-size-6 has-text-weight-normal">NICO</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/09/02/LEAF/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="LEAF">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-02T07:09:19.000Z">2019-09-02</time></div>
                    <a href="/2019/09/02/LEAF/" class="title has-link-black-ter is-size-6 has-text-weight-normal">LEAF</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Federated-Learning/">Federated Learning</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Arsip
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/11/">
                <span class="level-start">
                    <span class="level-item">November 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">June 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">May 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">January 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">December 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tag
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/AI/">
                        <span class="tag">AI</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/BigData/">
                        <span class="tag">BigData</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/C/">
                        <span class="tag">C++</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Cryptography/">
                        <span class="tag">Cryptography</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Federated-Learning/">
                        <span class="tag">Federated Learning</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Goa入门/">
                        <span class="tag">Goa入门</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LeetCode/">
                        <span class="tag">LeetCode</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Mac终端命令/">
                        <span class="tag">Mac终端命令</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Swagger/">
                        <span class="tag">Swagger</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/coding/">
                        <span class="tag">coding</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/encryption/">
                        <span class="tag">encryption</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/github/">
                        <span class="tag">github</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/golang/">
                        <span class="tag">golang</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/important/">
                        <span class="tag">important</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/intro/">
                        <span class="tag">intro</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/npm/">
                        <span class="tag">npm</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/paper/">
                        <span class="tag">paper</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/paper-reading/">
                        <span class="tag">paper reading</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/paperReading/">
                        <span class="tag">paperReading</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python转换/">
                        <span class="tag">python转换</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/pytorch学习/">
                        <span class="tag">pytorch学习</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/云端学习笔记/">
                        <span class="tag">云端学习笔记</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/代码/">
                        <span class="tag">代码</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/入门/">
                        <span class="tag">入门</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/入门指引/">
                        <span class="tag">入门指引</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/刷题/">
                        <span class="tag">刷题</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/双指针/">
                        <span class="tag">双指针</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/基础/">
                        <span class="tag">基础</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/大数据，spark/">
                        <span class="tag">大数据，spark</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/排序/">
                        <span class="tag">排序</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/提升自我/">
                        <span class="tag">提升自我</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/深度学习/">
                        <span class="tag">深度学习</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/神经网络搜索/">
                        <span class="tag">神经网络搜索</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/禅/">
                        <span class="tag">禅</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程/">
                        <span class="tag">编程</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程技巧，/">
                        <span class="tag">编程技巧，</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/联合学习/">
                        <span class="tag">联合学习</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/自我修炼/">
                        <span class="tag">自我修炼</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/论文阅读/">
                        <span class="tag">论文阅读</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/配置文件/">
                        <span class="tag">配置文件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="tutorialGO" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 Fallenk Liu&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-Hans");</script>

<script>
var IcarusThemeSettings = {
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>



    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Kembali ke atas" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Tulis Sesuatu.." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Artikel',
                PAGES: 'Halaman',
                CATEGORIES: 'Kategori',
                TAGS: 'Tag',
                UNTITLED: 'Tanpa Judul',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>